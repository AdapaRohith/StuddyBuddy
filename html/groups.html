<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Groups - StudyBuddy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #2d1b69 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
        }

        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tagline {
            color: #a0aec0;
            font-size: 0.9rem;
            font-weight: 400;
        }

        

        
        .main-nav {
            margin-bottom: 3rem;
        }

        .nav-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 1rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-btn {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            color: #94a3b8;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            font-weight: 500;
            min-width: 100px;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        
        a.nav-btn {
            text-decoration: none;
            color: #94a3b8;
        }

        a.nav-btn:visited {
            color: #94a3b8;
        }

        .nav-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        
        .main-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .main-title h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .main-title p {
            color: #94a3b8;
            font-size: 1.1rem;
        }

        
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 3rem;
            align-items: start;
        }

        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .filter-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 0.5rem;
            gap: 0.5rem;
        }

        .filter-tab {
            padding: 0.8rem 1.5rem;
            background: transparent;
            border: none;
            color: #94a3b8;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .filter-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .create-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 16px;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .create-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 2rem;
        }

        .group-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .group-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
            background-size: 300% 100%;
            animation: gradient 4s ease infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        @keyframes gradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .group-card:hover::before {
            opacity: 1;
        }

        .group-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(102, 126, 234, 0.3);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
        }

        
        .group-card:has(.group-options-menu.show) {
            transform: translateY(-8px);
        }

        .group-card:has(.group-options-menu.show):hover {
            transform: translateY(-8px);
        }

        .group-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }

        .group-avatar {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: #ffffff;
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .group-card:hover .group-avatar {
            transform: scale(1.05) rotate(5deg);
        }

        .group-info h3 {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 0.3rem;
            color: #ffffff;
        }

        .group-meta {
            color: #94a3b8;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .privacy-badge {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            padding: 0.2rem 0.6rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .group-description {
            color: #cbd5e0;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .group-stats {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .stat:hover {
            background: rgba(102, 126, 234, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
        }

        .stat i {
            color: #667eea;
        }

        .group-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-join {
            flex: 1;
            padding: 0.9rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .btn-join:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-more {
            padding: 0.9rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-more:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .btn-more:active {
            transform: translateY(0);
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-more:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(103, 126, 234, 0.3);
        }

        .btn-leave {
            padding: 0.9rem;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            color: #fca5a5;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .btn-leave:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.5);
            color: #ef4444;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .btn-leave:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(239, 68, 68, 0.3);
        }

        
        .btn-leave::after {
            content: attr(title);
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .btn-leave:hover::after {
            opacity: 1;
            visibility: visible;
        }

        
        .group-options-container {
            position: relative;
        }

        .group-options-menu {
            position: fixed;
            background: rgba(15, 15, 35, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 0.75rem 0;
            width: 220px;
            z-index: 99999;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.1);
            display: none;
            opacity: 0;
            transform: translateY(-5px);
            transition: opacity 0.2s ease, transform 0.2s ease;
            pointer-events: none;
        }

        .group-options-menu.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .option-btn {
            width: 100%;
            padding: 0.8rem 1rem;
            background: transparent;
            border: none;
            color: #cbd5e0;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            text-align: left;
        }

        .option-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            padding-left: 1.2rem;
        }

        .option-btn i {
            width: 16px;
            font-size: 0.9rem;
            color: #94a3b8;
            transition: color 0.3s ease;
        }

        .option-btn:hover i {
            color: #667eea;
        }

        .option-btn.danger:hover {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .option-btn.danger:hover i {
            color: #ef4444;
        }

        
        .option-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 0.5rem 0;
        }

        .admin-option {
            color: #fbbf24 !important;
            font-weight: 600;
        }

        .admin-option:hover {
            background: rgba(251, 191, 36, 0.1) !important;
            color: #fcd34d !important;
        }

        .admin-option.danger {
            color: #ef4444 !important;
        }

        .admin-option.danger:hover {
            background: rgba(239, 68, 68, 0.1) !important;
            color: #f87171 !important;
        }

        
        .option-btn[onclick*="leaveGroup"] {
            color: #fca5a5;
        }

        .option-btn[onclick*="leaveGroup"]:hover {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .option-btn[onclick*="leaveGroup"] i {
            color: #f87171;
        }

        .option-btn[onclick*="leaveGroup"]:hover i {
            color: #ef4444;
        }

        
        .option-btn[onclick*="reportGroup"] {
            color: #fdba74;
        }

        .option-btn[onclick*="reportGroup"]:hover {
            background: rgba(249, 115, 22, 0.1);
            color: #f97316;
        }

        .option-btn[onclick*="reportGroup"] i {
            color: #fb923c;
        }

        
        .sidebar {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 2rem;
            backdrop-filter: blur(20px);
            position: sticky;
            top: 2rem;
            height: fit-content;
        }

        .widget {
            margin-bottom: 2rem;
        }

        .widget:last-child {
            margin-bottom: 0;
        }

        .widget-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            color: #ffffff;
        }

        .widget-title i {
            color: #667eea;
            font-size: 1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(102, 126, 234, 0.15);
            transform: translateY(-3px);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .stat-number {
            font-size: 1.6rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 0.4rem;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .activity-feed {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .activity-item {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .activity-item:hover {
            color: #ffffff;
            transform: translateX(5px);
        }

        .activity-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .activity-time {
            font-size: 0.8rem;
            color: #64748b;
            margin-top: 0.3rem;
        }

        
        .admin-controls {
            padding: 1.5rem;
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.2);
            border-radius: 12px;
            margin-top: 1rem;
        }

        .admin-controls h3 {
            color: #ef4444;
            font-size: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-actions {
            display: grid;
            gap: 0.75rem;
        }

        .admin-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: rgba(15, 15, 35, 0.5);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-toggle-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .admin-toggle-title {
            font-weight: 600;
            color: #ffffff;
            font-size: 0.9rem;
        }

        .admin-toggle-desc {
            font-size: 0.8rem;
            color: #94a3b8;
        }

        .admin-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background: #374151;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .admin-switch.active {
            background: #10b981;
        }

        .admin-switch::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: #ffffff;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .admin-switch.active::before {
            transform: translateX(20px);
        }

        .admin-danger-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(220, 38, 38, 0.2);
        }

        .btn-admin-danger {
            flex: 1;
            padding: 0.75rem;
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.3);
            color: #ef4444;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-admin-danger:hover {
            background: rgba(220, 38, 38, 0.2);
            border-color: rgba(220, 38, 38, 0.5);
            transform: translateY(-2px);
        }

        .member-admin-actions {
            display: flex;
            gap: 0.5rem;
            margin-left: 0.5rem;
        }

        .btn-remove-member {
            padding: 0.25rem 0.5rem;
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.2);
            color: #ef4444;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }

        .btn-remove-member:hover {
            background: rgba(220, 38, 38, 0.2);
            transform: scale(1.05);
        }

        
        .confirmation-modal {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 0;
            max-width: 420px;
            width: 90%;
            animation: modalSlideIn 0.3s ease;
            overflow: hidden;
        }

        .confirmation-header {
            padding: 1.5rem;
            background: rgba(220, 38, 38, 0.1);
            border-bottom: 1px solid rgba(220, 38, 38, 0.2);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .confirmation-header h3 {
            margin: 0;
            color: #ef4444;
            font-size: 1.2rem;
        }

        .confirmation-header i {
            font-size: 1.5rem;
        }

        .confirmation-content {
            padding: 1.5rem;
        }

        .confirmation-content p {
            margin: 0 0 1rem 0;
            color: #e2e8f0;
            line-height: 1.5;
        }

        .confirmation-input {
            margin-top: 1.5rem;
        }

        .confirmation-input label {
            display: block;
            color: #e2e8f0;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .confirmation-input input {
            width: 100%;
            padding: 0.75rem;
            background: rgba(15, 15, 35, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #ffffff;
            font-size: 0.9rem;
            box-sizing: border-box;
        }

        .confirmation-input input:focus {
            outline: none;
            border-color: #ef4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .confirmation-actions {
            padding: 1rem 1.5rem 1.5rem 1.5rem;
            display: flex;
            gap: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .confirmation-actions .btn-cancel {
            flex: 1;
            padding: 0.75rem;
            background: rgba(100, 116, 139, 0.1);
            border: 1px solid rgba(100, 116, 139, 0.3);
            color: #94a3b8;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .confirmation-actions .btn-cancel:hover {
            background: rgba(100, 116, 139, 0.2);
            border-color: rgba(100, 116, 139, 0.5);
        }

        .confirmation-actions .btn-danger {
            flex: 1;
            padding: 0.75rem;
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.3);
            color: #ef4444;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .confirmation-actions .btn-danger:hover:not(:disabled) {
            background: rgba(220, 38, 38, 0.2);
            border-color: rgba(220, 38, 38, 0.5);
            transform: translateY(-2px);
        }

        .confirmation-actions .btn-danger:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .groups-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .nav-container {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .nav-btn {
                min-width: 80px;
                padding: 0.8rem 1rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-tabs {
                order: 2;
            }
            
            .create-btn {
                order: 3;
            }
            
            .groups-grid {
                grid-template-columns: 1fr;
            }
            
            .main-title h1 {
                font-size: 2rem;
            }

            .group-stats {
                flex-direction: column;
                gap: 0.8rem;
            }
        }

        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-container {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            backdrop-filter: blur(20px);
            position: relative;
        }

        
        .group-details-container {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 24px;
            max-width: 900px;
            width: 95%;
            max-height: 90vh;
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .group-details-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .group-details-avatar {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #ffffff;
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            flex-shrink: 0;
        }

        .group-details-info {
            flex: 1;
            min-width: 0;
        }

        .group-details-info h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .group-details-meta {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .group-details-info p {
            color: #cbd5e0;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        
        .details-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
        }

        .details-tab {
            flex: 1;
            padding: 1.2rem 1.5rem;
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 500;
            border-bottom: 3px solid transparent;
        }

        .details-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .details-tab:hover:not(.active) {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.05);
        }

        
        .details-content {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem 2rem 2rem;
        }

        .tab-panel {
            display: none;
            height: 100%;
        }

        .tab-panel.active {
            display: block;
        }

        
        .members-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .member-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.2rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .member-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .member-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .member-actions {
            display: flex;
            gap: 0.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .member-card:hover .member-actions {
            opacity: 1;
        }

        .btn-remove-member {
            padding: 0.5rem;
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.3);
            color: #ef4444;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .btn-remove-member:hover {
            background: rgba(220, 38, 38, 0.2);
            border-color: rgba(220, 38, 38, 0.5);
            transform: scale(1.1);
        }

        .member-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .member-details h4 {
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 0.3rem;
        }

        .member-role {
            color: #94a3b8;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .member-status {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin-top: 0.5rem;
            font-size: 0.75rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
        }

        .status-dot.away {
            background: #eab308;
        }

        .status-dot.offline {
            background: #64748b;
        }

        
        .resources-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .resources-header h4 {
            color: #ffffff;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-resource-btn {
            padding: 0.6rem 1.2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .add-resource-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .resources-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .resource-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.2rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .resource-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .resource-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.8rem;
        }

        .resource-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-size: 1.2rem;
        }

        .resource-info h5 {
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 0.2rem;
            font-size: 0.95rem;
        }

        .resource-meta {
            color: #94a3b8;
            font-size: 0.8rem;
        }

        .resource-description {
            color: #cbd5e0;
            font-size: 0.85rem;
            line-height: 1.5;
            margin-bottom: 0.8rem;
        }

        .resource-actions {
            display: flex;
            gap: 0.5rem;
        }

        .resource-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: transparent;
            color: #94a3b8;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .resource-btn:hover {
            color: #ffffff;
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        
        .messages-container {
            display: flex;
            flex-direction: column;
            height: 400px;
        }

        .messages-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            margin-bottom: 1rem;
            max-height: 320px;
        }

        .message {
            margin-bottom: 1rem;
            padding: 0.8rem 1rem;
            border-radius: 16px;
            max-width: 70%;
            animation: messageIn 0.3s ease;
        }

        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.own {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .message.other {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.3rem;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .message-content {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .message-input-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 0.8rem;
        }

        .message-input {
            display: flex;
            gap: 0.8rem;
            align-items: center;
        }

        .message-input input {
            flex: 1;
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #ffffff;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .message-input input:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.15);
        }

        .message-input input::placeholder {
            color: #94a3b8;
        }

        .message-input button {
            padding: 0.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
        }

        .message-input button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        
        .message-restricted {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
        }

        .restricted-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            color: #94a3b8;
        }

        .restricted-content i {
            font-size: 2rem;
            color: #667eea;
            opacity: 0.7;
        }

        .restricted-content span {
            font-size: 1rem;
            font-weight: 500;
        }

        .btn-join-to-message {
            padding: 0.8rem 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-join-to-message:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        
        .message-input.disabled input {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.05);
            color: #64748b;
            cursor: not-allowed;
        }

        .message-input.disabled input::placeholder {
            color: #475569;
        }

        .message-input.disabled button {
            background: rgba(102, 126, 234, 0.3);
            cursor: not-allowed;
            opacity: 0.5;
        }

        .message-input.disabled button:hover {
            transform: none;
            box-shadow: none;
        }

        
        .group-join-actions {
            padding: 1.5rem 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.03);
        }

        .access-code-section {
            margin-bottom: 1rem;
        }

        
        @media (max-width: 768px) {
            .group-details-container {
                width: 98%;
                max-height: 95vh;
            }

            .group-details-header {
                padding: 1.5rem 1.5rem 1rem;
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .details-content {
                padding: 1rem 1.5rem 1.5rem;
            }

            .members-list {
                grid-template-columns: 1fr;
            }

            .resources-list {
                grid-template-columns: 1fr;
            }

            .message {
                max-width: 85%;
            }

            .details-tabs {
                overflow-x: auto;
            }

            .details-tab {
                min-width: 120px;
                flex-shrink: 0;
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .modal-header p {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: #94a3b8;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            color: #ffffff;
            transform: rotate(90deg);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group input::placeholder {
            color: #94a3b8;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-modal {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-modal.cancel {
            background: rgba(255, 255, 255, 0.1);
            color: #94a3b8;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-modal.cancel:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }

        .btn-modal.join {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
        }

        .btn-modal.join:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .error-message {
            color: #ff6b6b;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            display: none;
        }

        .success-message {
            background: rgba(46, 213, 115, 0.2);
            border: 1px solid rgba(46, 213, 115, 0.3);
            color: #2ed573;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            display: none;
            text-align: center;
        }

        
        
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.2s ease;
            width: 48px;
            height: 48px;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-menu-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }
        
        .mobile-nav-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #2d1b69 100%);
            background-attachment: fixed;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        
        @supports not (backdrop-filter: blur(12px)) {
            .mobile-nav-overlay {
                background: linear-gradient(135deg, rgba(15, 15, 35, 0.95) 0%, rgba(26, 26, 62, 0.95) 50%, rgba(45, 27, 105, 0.95) 100%);
            }
        }
        
        
        .mobile-nav-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(15, 15, 35, 0.3) 0%, rgba(26, 26, 62, 0.2) 50%, rgba(45, 27, 105, 0.3) 100%);
            z-index: -1;
        }
        
        .mobile-nav-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .mobile-nav-menu {
            position: fixed;
            top: 0;
            right: -320px;
            width: 300px;
            height: 100vh;
            background: linear-gradient(180deg, #1a1a3e 0%, #2d1b69 100%);
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
            transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            z-index: 10000;
        }
        
        .mobile-nav-overlay.active .mobile-nav-menu {
            right: 0;
        }
        
        .mobile-nav-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .mobile-nav-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
        }
        
        .mobile-nav-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.2s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-nav-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .mobile-nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .mobile-nav-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .mobile-nav-link {
            display: flex;
            align-items: center;
            padding: 18px 20px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.2s ease;
            gap: 15px;
            min-height: 60px;
        }
        
        .mobile-nav-link:hover,
        .mobile-nav-link.active {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            transform: translateX(5px);
        }
        
        .mobile-nav-link i {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
            color: #667eea;
        }
        
        .mobile-nav-link span {
            font-size: 1rem;
            font-weight: 500;
        }
        
        
        .nav-toggle {
            display: none;
            background: none;
            border: none;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.2s ease;
            width: 48px;
            height: 48px;
            align-items: center;
            justify-content: center;
        }
        
        .nav-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }
        
        
        
        @media (max-width: 992px) {
            .nav-container {
                display: none !important;
            }
            
            .nav-toggle {
                display: flex !important;
            }
            
            .mobile-nav-overlay {
                display: block;
            }
            
            .header {
                flex-wrap: wrap;
                gap: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header {
                margin-bottom: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0.5rem;
            }
            
            .mobile-nav-menu {
                width: 280px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="header">
            <div class="logo-section">
                <div class="logo">
                    <i class="fa-solid fa-graduation-cap"></i>
                    StudyBuddy
                </div>
                <div class="tagline">Collaborate. Learn. Achieve.</div>
            </div>
            
            
        </div>

        
        <div class="mobile-nav-overlay" id="mobileNavOverlay">
            <div class="mobile-nav-menu">
                <div class="mobile-nav-header">
                    <span class="mobile-nav-title">StudyBuddy Menu</span>
                    <button class="mobile-nav-close" id="mobileNavClose">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </div>
                
                <ul class="mobile-nav-list">
                    <li class="mobile-nav-item">
                        <a href="../index.html" class="mobile-nav-link">
                            <i class="fa-solid fa-house"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="mobile-nav-item">
                        <a href="groups.html" class="mobile-nav-link active">
                            <i class="fa-solid fa-users"></i>
                            <span>Groups</span>
                        </a>
                    </li>
                    <li class="mobile-nav-item">
                        <a href="resources.html" class="mobile-nav-link">
                            <i class="fa-solid fa-folder-open"></i>
                            <span>Resources</span>
                        </a>
                    </li>
                    <li class="mobile-nav-item">
                        <a href="schedule.html" class="mobile-nav-link">
                            <i class="fa-solid fa-calendar-days"></i>
                            <span>Schedule</span>
                        </a>
                    </li>
                    <li class="mobile-nav-item">
                        <a href="profile.html" class="mobile-nav-link">
                            <i class="fa-solid fa-user"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        
        <nav class="main-nav">
            <div class="nav-container">
                <a href="../index.html" class="nav-btn">
                    <i class="fa-solid fa-house"></i>
                    <span>Dashboard</span>
                </a>
                <button class="nav-btn active" onclick="navigateTo('groups')">
                    <i class="fa-solid fa-users"></i>
                    <span>Groups</span>
                </button>
                <a href="resources.html" class="nav-btn">
                    <i class="fa-solid fa-folder-open"></i>
                    <span>Resources</span>
                </a>
                <a href="schedule.html" class="nav-btn">
                    <i class="fa-solid fa-calendar-days"></i>
                    <span>Schedule</span>
                </a>
                <a href="profile.html" class="nav-btn">
                    <i class="fa-solid fa-user"></i>
                    <span>Profile</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </nav>

        
        <div class="main-title">
            <h1>
                <i class="fa-solid fa-users"></i>
                My Study Groups
            </h1>
            <p>Join study groups and collaborate with peers worldwide</p>
        </div>

        <div class="main-layout">
            <div class="content">
                
                <div class="controls">
                    <div class="search-box">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" placeholder="Search groups..." id="groupSearch">
                    </div>
                    
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="all">All</button>
                        <button class="filter-tab" data-filter="my-groups">My Groups</button>
                        <button class="filter-tab" data-filter="public">Public</button>
                        <button class="filter-tab" data-filter="private">Private</button>
                    </div>
                    
                    <button class="create-btn" id="createGroupBtn">
                        <i class="fa-solid fa-plus"></i>
                        Create Group
                    </button>
                </div>

                
                <div class="groups-grid" id="groupsContainer">
                    
                </div>
            </div>

            
            <div class="sidebar">
                <div class="widget">
                    <div class="widget-title">
                        <i class="fa-solid fa-chart-bar"></i>
                        Statistics
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">5</div>
                            <div class="stat-label">Total Groups</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">2</div>
                            <div class="stat-label">Joined</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">89%</div>
                            <div class="stat-label">Active</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">24h</div>
                            <div class="stat-label">This Week</div>
                        </div>
                    </div>
                </div>

                <div class="widget">
                    <div class="widget-title">
                        <i class="fa-solid fa-clock"></i>
                        Recent Activity
                    </div>
                    <div class="activity-feed">
                        <div class="activity-item">
                            New message in <strong style="color: #fff;">Mathematics</strong>
                            <div class="activity-time">2 minutes ago</div>
                        </div>
                        <div class="activity-item">
                            Sarah joined <strong style="color: #fff;">Physics Lab</strong>
                            <div class="activity-time">1 hour ago</div>
                        </div>
                        <div class="activity-item">
                            New resource in <strong style="color: #fff;">JEE Prep</strong>
                            <div class="activity-time">3 hours ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="modal-overlay" id="groupDetailsModal">
        <div class="group-details-container">
            <button class="close-modal" id="closeModal">
                <i class="fa-solid fa-times"></i>
            </button>
            
            
            <div class="group-details-header">
                <div class="group-details-avatar" id="groupDetailsAvatar"></div>
                <div class="group-details-info">
                    <h2 id="groupDetailsName">Mathematics Study Circle</h2>
                    <div class="group-details-meta">
                        <span id="groupDetailsMembers">24 members</span>  
                        <span id="groupDetailsSubject">Mathematics</span>
                        <span class="privacy-badge" id="groupDetailsPrivacy"> Public</span>
                    </div>
                    <p id="groupDetailsDescription">Advanced calculus, linear algebra, and statistics discussions</p>
                </div>
            </div>

            
            <div class="details-tabs">
                <button class="details-tab active" data-tab="members">
                    <i class="fa-solid fa-users"></i>
                    Members
                </button>
                <button class="details-tab" data-tab="resources">
                    <i class="fa-solid fa-folder-open"></i>
                    Resources
                </button>
                <button class="details-tab" data-tab="messages">
                    <i class="fa-solid fa-message"></i>
                    Messages
                </button>
                <button class="details-tab" data-tab="admin" id="adminTab" style="display: none;">
                    <i class="fa-solid fa-shield-alt"></i>
                    Admin
                </button>
            </div>

            
            <div class="details-content">
                
                <div class="tab-panel active" id="membersPanel">
                    <div class="members-list" id="membersList">
                        
                    </div>
                </div>

                
                <div class="tab-panel" id="resourcesPanel">
                    <div class="resources-header">
                        <h4><i class="fa-solid fa-folder-open"></i> Shared Resources</h4>
                        <button class="add-resource-btn">
                            <i class="fa-solid fa-plus"></i>
                            Add Resource
                        </button>
                    </div>
                    <div class="resources-list" id="resourcesList">
                        
                    </div>
                </div>

                
                <div class="tab-panel" id="messagesPanel">
                    <div class="messages-container">
                        <div class="messages-list" id="messagesList">
                            
                        </div>
                        <div class="message-input-container" id="messageInputContainer">
                            <div class="message-input" id="messageInputArea">
                                <input type="text" id="messageInput" placeholder="Type your message...">
                                <button id="sendMessage">
                                    <i class="fa-solid fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="message-restricted" id="messageRestricted" style="display: none;">
                                <div class="restricted-content">
                                    <i class="fa-solid fa-lock"></i>
                                    <span>You must be a member to send messages</span>
                                    <button class="btn-join-to-message" id="joinToMessageBtn">Join Group</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
                <div class="tab-panel" id="adminPanel">
                    <div class="admin-controls">
                        <h3>
                            <i class="fa-solid fa-shield-alt"></i>
                            Admin Controls
                        </h3>
                        
                        
                        <div class="admin-actions">
                            <div class="admin-toggle" id="messageToggle">
                                <div class="admin-toggle-info">
                                    <div class="admin-toggle-title">Message Sharing</div>
                                    <div class="admin-toggle-desc">Allow members to send messages in this group</div>
                                </div>
                                <div class="admin-switch active" id="messageSwitch" onclick="toggleMessageSharing()"></div>
                            </div>
                            
                            <div class="admin-toggle" id="resourceToggle">
                                <div class="admin-toggle-info">
                                    <div class="admin-toggle-title">Resource Sharing</div>
                                    <div class="admin-toggle-desc">Allow members to upload and download resources</div>
                                </div>
                                <div class="admin-switch active" id="resourceSwitch" onclick="toggleResourceSharing()"></div>
                            </div>
                        </div>
                        
                        
                        <div class="admin-danger-actions">
                            <button class="btn-admin-danger" onclick="confirmDeleteGroup()">
                                <i class="fa-solid fa-trash"></i>
                                Delete Group
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            
            <div class="group-join-actions" id="groupJoinActions" style="display: none;">
                <div class="access-code-section" id="accessCodeSection" style="display: none;">
                    <div class="form-group">
                        <label for="joinAccessCode">Access Code Required</label>
                        <input type="password" id="joinAccessCode" placeholder="Enter group access code">
                        <div class="error-message" id="errorMessage">Invalid access code. Please try again.</div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn-modal cancel" id="cancelModal">Cancel</button>
                    <button class="btn-modal join" id="joinGroupBtn">Join Group</button>
                </div>
            </div>
        </div>
    </div>

    
    <div class="modal-overlay" id="privateAccessModal">
        <div class="modal-container">
            <button class="close-modal" id="closePrivateModal">
                <i class="fa-solid fa-times"></i>
            </button>
            
            <div class="modal-header">
                <h2>
                    <i class="fa-solid fa-lock"></i>
                    Private Group Access
                </h2>
                <p id="privateGroupNameDisplay">Enter the access code to view this private group</p>
            </div>

            <div class="success-message" id="privateSuccessMessage">
                <i class="fa-solid fa-check-circle"></i>
                Access granted! Opening group...
            </div>

            <form id="privateAccessForm">
                <div class="form-group">
                    <label for="privateAccessCode">Access Code</label>
                    <input 
                        type="password" 
                        id="privateAccessCode" 
                        placeholder="Enter group access code"
                        maxlength="20"
                        required
                    >
                    <div class="error-message" id="privateErrorMessage">
                        Invalid access code. Please try again.
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-modal cancel" id="cancelPrivateModal">
                        <i class="fa-solid fa-times"></i>
                        Cancel
                    </button>
                    <button type="submit" class="btn-modal join" id="accessGroup">
                        <i class="fa-solid fa-key"></i>
                        Access Group
                    </button>
                </div>
            </form>
        </div>
    </div>

    
    <div class="modal-overlay" id="createGroupModal">
        <div class="create-group-container">
            <button class="close-modal" id="closeCreateModal">
                <i class="fa-solid fa-times"></i>
            </button>
            
            <div class="modal-header">
                <h2>
                    <i class="fa-solid fa-users"></i>
                    Create New Study Group
                </h2>
                <p>Start your own study community and invite others to join</p>
            </div>

            <form id="createGroupForm">
                
                <div class="form-section">
                    <h3><i class="fa-solid fa-info-circle"></i> Basic Information</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="groupName">Group Name *</label>
                            <input type="text" id="groupName" placeholder="e.g., Advanced Mathematics Study Circle" required maxlength="50">
                            <div class="char-counter">0/50</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="groupSubject">Subject Category *</label>
                            <select id="groupSubject" required>
                                <option value="">Select a subject...</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Medical">Medical</option>
                                <option value="Business">Business</option>
                                <option value="Languages">Languages</option>
                                <option value="Arts">Arts & Humanities</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="groupEmoji">Group Icon</label>
                            <div class="emoji-selector">
                                <input type="text" id="groupEmoji" value="" readonly>
                                <button type="button" class="emoji-btn" onclick="showEmojiPicker()">
                                    <i class="fa-solid fa-smile"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="groupDescription">Description *</label>
                            <textarea id="groupDescription" placeholder="Describe what your group is about, study goals, meeting schedule, etc." required maxlength="200" rows="3"></textarea>
                            <div class="char-counter">0/200</div>
                        </div>
                    </div>
                </div>

                
                <div class="form-section">
                    <h3><i class="fa-solid fa-shield-alt"></i> Privacy & Access</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Group Type *</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="typePublic" name="groupType" value="public" checked>
                                    <label for="typePublic">
                                        <i class="fa-solid fa-globe"></i>
                                        <div>
                                            <strong>Public</strong>
                                            <small>Anyone can find and join this group</small>
                                        </div>
                                    </label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="typePrivate" name="groupType" value="private">
                                    <label for="typePrivate">
                                        <i class="fa-solid fa-lock"></i>
                                        <div>
                                            <strong>Private</strong>
                                            <small>Requires access code to join</small>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row" id="accessCodeRow" style="display: none;">
                        <div class="form-group">
                            <label for="accessCode">Access Code *</label>
                            <input type="text" id="accessCode" name="accessCode" placeholder="Create a secure access code" maxlength="20" autocomplete="off">
                            <small>Members will need this code to join your private group (minimum 3 characters)</small>
                        </div>
                    </div>
                </div>

                
                <div class="form-section">
                    <h3><i class="fa-solid fa-cog"></i> Group Settings</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="memberLimit">Member Limit</label>
                            <select id="memberLimit">
                                <option value="50">50 members (Small group)</option>
                                <option value="100" selected>100 members (Medium group)</option>
                                <option value="250">250 members (Large group)</option>
                                <option value="500">500 members (Community)</option>
                                <option value="unlimited">Unlimited members</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="studyLevel">Study Level</label>
                            <select id="studyLevel">
                                <option value="">Select level...</option>
                                <option value="high-school">High School</option>
                                <option value="undergraduate">Undergraduate</option>
                                <option value="graduate">Graduate</option>
                                <option value="professional">Professional</option>
                                <option value="mixed">Mixed Levels</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label>Group Features</label>
                            <div class="checkbox-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="allowFileSharing" checked>
                                    <label for="allowFileSharing">
                                        <i class="fa-solid fa-file-upload"></i>
                                        Allow file sharing
                                    </label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="allowEvents" checked>
                                    <label for="allowEvents">
                                        <i class="fa-solid fa-calendar"></i>
                                        Enable study events
                                    </label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="allowDiscussions" checked>
                                    <label for="allowDiscussions">
                                        <i class="fa-solid fa-comments"></i>
                                        Group discussions
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
                <div class="form-section">
                    <h3><i class="fa-solid fa-tags"></i> Tags & Topics</h3>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="groupTags">Study Topics</label>
                            <input type="text" id="groupTags" placeholder="Add tags (press Enter to add): calculus, algebra, geometry...">
                            <small>Add relevant study topics to help others find your group</small>
                            <div class="tags-container" id="tagsContainer"></div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-cancel" id="cancelCreate">
                        <i class="fa-solid fa-times"></i>
                        Cancel
                    </button>
                    <button type="submit" class="btn-create">
                        <i class="fa-solid fa-plus"></i>
                        Create Group
                    </button>
                </div>
            </form>
        </div>
    </div>

    
    <div class="modal-overlay" id="deleteGroupModal" style="display: none;">
        <div class="confirmation-modal">
            <div class="confirmation-header">
                <i class="fa-solid fa-exclamation-triangle" style="color: #ef4444;"></i>
                <h3>Delete Group</h3>
            </div>
            <div class="confirmation-content">
                <p>Are you sure you want to delete <strong id="deleteGroupName">this group</strong>?</p>
                <p style="color: #ef4444; font-size: 0.9rem;">This action cannot be undone. All messages, resources, and member data will be permanently lost.</p>
                
                <div class="confirmation-input">
                    <label>Type <strong>DELETE</strong> to confirm:</label>
                    <input type="text" id="deleteConfirmation" placeholder="Type DELETE to confirm" style="margin-top: 0.5rem;">
                </div>
            </div>
            <div class="confirmation-actions">
                <button class="btn-cancel" onclick="hideDeleteGroupModal()">
                    <i class="fa-solid fa-times"></i>
                    Cancel
                </button>
                <button class="btn-danger" id="confirmDeleteBtn" onclick="deleteGroup()" disabled>
                    <i class="fa-solid fa-trash"></i>
                    Delete Group
                </button>
            </div>
        </div>
    </div>

    
    <div class="modal-overlay" id="removeMemberModal" style="display: none;">
        <div class="confirmation-modal">
            <div class="confirmation-header">
                <i class="fa-solid fa-user-minus" style="color: #ef4444;"></i>
                <h3>Remove Member</h3>
            </div>
            <div class="confirmation-content">
                <p>Are you sure you want to remove <strong id="removeMemberName">this member</strong> from <strong id="removeFromGroupName">this group</strong>?</p>
                <p style="color: #ef4444; font-size: 0.9rem;">The member will lose access to all group content and will need to rejoin to participate again.</p>
            </div>
            <div class="confirmation-actions">
                <button class="btn-cancel" onclick="hideRemoveMemberModal()">
                    <i class="fa-solid fa-times"></i>
                    Cancel
                </button>
                <button class="btn-danger" id="confirmRemoveBtn" onclick="removeMemberFromGroup()">
                    <i class="fa-solid fa-user-minus"></i>
                    Remove Member
                </button>
            </div>
        </div>
    </div>

    <script>
        
        const groups = [
            {
                id: 'group_1',
                name: 'Mathematics Study Circle',
                description: 'Advanced calculus, linear algebra, and statistics discussions with weekly problem-solving sessions',
                subject: 'Mathematics',
                memberCount: 24,
                type: 'public',
                avatar: '',
                lastActivity: '2 hours ago',
                newMessages: 5,
                members: [
                    { id: 1, name: 'Alex Johnson', role: 'Admin', avatar: 'AJ', status: 'online' },
                    { id: 2, name: 'Sarah Chen', role: 'Moderator', avatar: 'SC', status: 'online' },
                    { id: 3, name: 'Mike Rodriguez', role: 'Member', avatar: 'MR', status: 'away' },
                    { id: 4, name: 'Emily Davis', role: 'Member', avatar: 'ED', status: 'online' },
                    { id: 5, name: 'James Wilson', role: 'Member', avatar: 'JW', status: 'offline' },
                    { id: 6, name: 'Lisa Thompson', role: 'Member', avatar: 'LT', status: 'online' }
                ],
                resources: [
                    { id: 1, name: 'Calculus Notes PDF', type: 'pdf', size: '2.4 MB', uploadedBy: 'Alex Johnson', uploadDate: '2024-10-25', description: 'Complete calculus study notes with examples' },
                    { id: 2, name: 'Linear Algebra Videos', type: 'video', size: '156 MB', uploadedBy: 'Sarah Chen', uploadDate: '2024-10-24', description: 'Video lectures on linear algebra concepts' },
                    { id: 3, name: 'Statistics Formula Sheet', type: 'doc', size: '890 KB', uploadedBy: 'Mike Rodriguez', uploadDate: '2024-10-23', description: 'Quick reference for statistical formulas' }
                ],
                messages: [
                    { id: 1, sender: 'Alex Johnson', content: 'Welcome everyone! Let\'s start with today\'s calculus problems.', time: '10:30 AM', isOwn: false },
                    { id: 2, sender: 'You', content: 'Thanks Alex! I have a question about derivatives.', time: '10:32 AM', isOwn: true },
                    { id: 3, sender: 'Sarah Chen', content: 'I can help with that! What specific concept?', time: '10:35 AM', isOwn: false },
                    { id: 4, sender: 'Mike Rodriguez', content: 'Check out the new formula sheet I uploaded!', time: '11:15 AM', isOwn: false }
                ],
                adminSettings: {
                    messageSharing: true,
                    resourceSharing: true
                },
                currentUserRole: 'Admin'
            },
            {
                id: 'group_2',
                name: 'Computer Science Hub',
                description: 'Programming, algorithms, data structures, and software development with hands-on projects',
                subject: 'Computer Science',
                memberCount: 156,
                type: 'public',
                avatar: '',
                lastActivity: '30 minutes ago',
                newMessages: 12,
                members: [
                    { id: 1, name: 'David Park', role: 'Admin', avatar: 'DP', status: 'online' },
                    { id: 2, name: 'Rachel Green', role: 'Moderator', avatar: 'RG', status: 'online' },
                    { id: 3, name: 'Kevin Liu', role: 'Moderator', avatar: 'KL', status: 'online' },
                    { id: 4, name: 'Sophia Martinez', role: 'Member', avatar: 'SM', status: 'away' },
                    { id: 5, name: 'Ryan Brown', role: 'Member', avatar: 'RB', status: 'online' },
                    { id: 6, name: 'Hannah Kim', role: 'Member', avatar: 'HK', status: 'online' }
                ],
                resources: [
                    { id: 1, name: 'JavaScript Algorithms', type: 'code', size: '45 KB', uploadedBy: 'David Park', uploadDate: '2024-10-26', description: 'Common algorithms implemented in JavaScript' },
                    { id: 2, name: 'Python Data Structures', type: 'code', size: '78 KB', uploadedBy: 'Rachel Green', uploadDate: '2024-10-25', description: 'Implementation of various data structures' },
                    { id: 3, name: 'React Project Template', type: 'zip', size: '1.2 MB', uploadedBy: 'Kevin Liu', uploadDate: '2024-10-24', description: 'Starter template for React projects' }
                ],
                messages: [
                    { id: 1, sender: 'David Park', content: 'New coding challenge is up! Check out the algorithms section.', time: '2:15 PM', isOwn: false },
                    { id: 2, sender: 'Rachel Green', content: 'Great! I\'ll work on the binary tree problem.', time: '2:18 PM', isOwn: false },
                    { id: 3, sender: 'You', content: 'Can someone review my solution?', time: '2:20 PM', isOwn: true },
                    { id: 4, sender: 'Kevin Liu', content: 'Sure! Share your code and I\'ll take a look.', time: '2:22 PM', isOwn: false }
                ],
                adminSettings: {
                    messageSharing: true,
                    resourceSharing: true
                },
                currentUserRole: 'Admin'
            },
            {
                id: 'group_3',
                name: 'Physics Research Lab',
                description: 'Quantum mechanics, thermodynamics, and advanced physics research collaboration',
                subject: 'Physics',
                memberCount: 12,
                type: 'private',
                avatar: '',
                lastActivity: '4 hours ago',
                newMessages: 3,
                accessCode: 'physics123',
                members: [
                    { id: 1, name: 'Dr. Robert Clarke', role: 'Admin', avatar: 'RC', status: 'away' },
                    { id: 2, name: 'Maria Santos', role: 'Researcher', avatar: 'MS', status: 'online' },
                    { id: 3, name: 'Thomas Wright', role: 'Graduate', avatar: 'TW', status: 'offline' },
                    { id: 4, name: 'Anna Kowalski', role: 'Graduate', avatar: 'AK', status: 'online' }
                ],
                resources: [
                    { id: 1, name: 'Quantum Mechanics Papers', type: 'pdf', size: '15.6 MB', uploadedBy: 'Dr. Robert Clarke', uploadDate: '2024-10-22', description: 'Recent research papers on quantum mechanics' },
                    { id: 2, name: 'Lab Experiment Data', type: 'excel', size: '890 KB', uploadedBy: 'Maria Santos', uploadDate: '2024-10-21', description: 'Experimental data from recent lab sessions' },
                    { id: 3, name: 'Thermodynamics Simulations', type: 'zip', size: '3.4 MB', uploadedBy: 'Thomas Wright', uploadDate: '2024-10-20', description: 'Computer simulations for thermodynamics' }
                ],
                messages: [
                    { id: 1, sender: 'Dr. Robert Clarke', content: 'Please review the quantum entanglement paper before Friday.', time: '9:30 AM', isOwn: false },
                    { id: 2, sender: 'Maria Santos', content: 'I\'ve uploaded the latest experimental data.', time: '10:45 AM', isOwn: false },
                    { id: 3, sender: 'You', content: 'The results look promising! Great work team.', time: '11:20 AM', isOwn: true }
                ],
                adminSettings: {
                    messageSharing: false,
                    resourceSharing: true
                },
                currentUserRole: 'Graduate'
            },
            {
                id: 'group_4',
                name: 'JEE Advanced Preparation',
                description: 'Joint Entrance Examination Advanced preparation for IIT admissions with mock tests',
                subject: 'Engineering',
                memberCount: 284,
                type: 'public',
                avatar: '',
                lastActivity: '45 minutes ago',
                newMessages: 18,
                members: [
                    { id: 1, name: 'Priya Sharma', role: 'Admin', avatar: 'PS', status: 'online' },
                    { id: 2, name: 'Arjun Patel', role: 'Moderator', avatar: 'AP', status: 'online' },
                    { id: 3, name: 'Neha Gupta', role: 'Top Performer', avatar: 'NG', status: 'online' },
                    { id: 4, name: 'Rohit Singh', role: 'Member', avatar: 'RS', status: 'away' },
                    { id: 5, name: 'Kavya Reddy', role: 'Member', avatar: 'KR', status: 'online' },
                    { id: 6, name: 'Aman Kumar', role: 'Member', avatar: 'AK', status: 'online' }
                ],
                resources: [
                    { id: 1, name: 'JEE Physics Solutions', type: 'pdf', size: '8.9 MB', uploadedBy: 'Priya Sharma', uploadDate: '2024-10-27', description: 'Detailed solutions for JEE physics problems' },
                    { id: 2, name: 'Mathematics Mock Tests', type: 'pdf', size: '4.2 MB', uploadedBy: 'Arjun Patel', uploadDate: '2024-10-26', description: 'Practice tests for JEE mathematics' },
                    { id: 3, name: 'Chemistry Formula Bank', type: 'doc', size: '1.8 MB', uploadedBy: 'Neha Gupta', uploadDate: '2024-10-25', description: 'Important chemistry formulas for JEE' }
                ],
                messages: [
                    { id: 1, sender: 'Priya Sharma', content: 'Mock test results are out! Great improvement everyone!', time: '1:30 PM', isOwn: false },
                    { id: 2, sender: 'Arjun Patel', content: 'Next mock test scheduled for Thursday.', time: '1:35 PM', isOwn: false },
                    { id: 3, sender: 'Neha Gupta', content: 'I scored 95% in the physics section! ', time: '1:40 PM', isOwn: false },
                    { id: 4, sender: 'You', content: 'Congratulations Neha! Any tips for organic chemistry?', time: '1:45 PM', isOwn: true }
                ],
                adminSettings: {
                    messageSharing: true,
                    resourceSharing: true
                },
                currentUserRole: 'Member'
            },
            {
                id: 'group_5',
                name: 'NEET Medical Entrance',
                description: 'National Eligibility cum Entrance Test for medical college admissions and MBBS preparation',
                subject: 'Medical',
                memberCount: 89,
                type: 'private',
                avatar: '',
                lastActivity: '20 minutes ago',
                newMessages: 7,
                accessCode: 'neet2024',
                members: [
                    { id: 1, name: 'Dr. Sunita Verma', role: 'Admin', avatar: 'SV', status: 'online' },
                    { id: 2, name: 'Ravi Agarwal', role: 'Moderator', avatar: 'RA', status: 'online' },
                    { id: 3, name: 'Pooja Jain', role: 'Top Scorer', avatar: 'PJ', status: 'away' },
                    { id: 4, name: 'Vikash Yadav', role: 'Member', avatar: 'VY', status: 'online' },
                    { id: 5, name: 'Sneha Iyer', role: 'Member', avatar: 'SI', status: 'online' }
                ],
                resources: [
                    { id: 1, name: 'Biology NCERT Notes', type: 'pdf', size: '12.3 MB', uploadedBy: 'Dr. Sunita Verma', uploadDate: '2024-10-28', description: 'Comprehensive NCERT biology notes' },
                    { id: 2, name: 'Chemistry Previous Papers', type: 'pdf', size: '6.7 MB', uploadedBy: 'Ravi Agarwal', uploadDate: '2024-10-27', description: 'Last 10 years NEET chemistry papers' },
                    { id: 3, name: 'Physics Quick Revision', type: 'doc', size: '2.1 MB', uploadedBy: 'Pooja Jain', uploadDate: '2024-10-26', description: 'Quick revision notes for NEET physics' }
                ],
                messages: [
                    { id: 1, sender: 'Dr. Sunita Verma', content: 'Biology mock test tomorrow at 2 PM sharp!', time: '4:15 PM', isOwn: false },
                    { id: 2, sender: 'Ravi Agarwal', content: 'Don\'t forget to practice organic chemistry reactions.', time: '4:20 PM', isOwn: false },
                    { id: 3, sender: 'Pooja Jain', content: 'I\'ve shared my revision notes. Hope they help!', time: '4:25 PM', isOwn: false },
                    { id: 4, sender: 'You', content: 'Thanks Pooja! These notes are really helpful.', time: '4:30 PM', isOwn: true }
                ],
                adminSettings: {
                    messageSharing: true,
                    resourceSharing: true
                },
                currentUserRole: 'Member'
            }
        ];

        
        let currentGroup = null;
        let userMemberships = ['group_1', 'group_2', 'group_4']; 

        
        function renderGroups(groupsToRender = groups) {
            const container = document.getElementById('groupsContainer');
            container.innerHTML = groupsToRender.map(group => `
                <div class="group-card" data-type="${group.type}" data-id="${group.id}" onclick="handleGroupClick('${group.id}')">
                    <div class="group-header">
                        <div class="group-avatar">${group.avatar}</div>
                        <div class="group-info">
                            <h3>${group.name}</h3>
                            <div class="group-meta">
                                ${group.memberCount} members  ${group.subject}
                                <span class="privacy-badge">
                                    ${group.type === 'private' ? ' Private' : ' Public'}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="group-description">${group.description}</div>
                    <div class="group-stats">
                        <div class="stat">
                            <i class="fa-solid fa-clock"></i>
                            Active ${group.lastActivity}
                        </div>
                        <div class="stat">
                            <i class="fa-solid fa-message"></i>
                            ${group.newMessages} new messages
                        </div>
                        <div class="stat">
                            <i class="fa-solid fa-users"></i>
                            ${group.memberCount} members
                        </div>
                    </div>
                    <div class="group-actions" onclick="event.stopPropagation()">
                        <button class="btn-join" onclick="handleJoinClick('${group.id}')">
                            ${userMemberships.includes(group.id) ? 'View Group' : (group.type === 'private' ? 'Request Join' : 'Join Group')}
                        </button>
                        <div class="group-options-container">
                            <button class="btn-more" onclick="toggleGroupOptions('${group.id}', event)">
                                <i class="fa-solid fa-ellipsis"></i>
                            </button>
                            <div class="group-options-menu" id="options-${group.id}" style="display: none;">
                                ${userMemberships.includes(group.id) ? `
                                    <button class="option-btn" onclick="leaveGroup('${group.id}')">
                                        <i class="fa-solid fa-sign-out-alt"></i>
                                        Leave Group
                                    </button>
                                    <div class="option-divider"></div>
                                ` : ''}
                                <button class="option-btn" onclick="shareGroup('${group.id}')">
                                    <i class="fa-solid fa-share"></i>
                                    Share Group
                                </button>
                                <button class="option-btn" onclick="reportGroup('${group.id}')">
                                    <i class="fa-solid fa-flag"></i>
                                    Report Group
                                </button>
                                <button class="option-btn" onclick="copyGroupLink('${group.id}')">
                                    <i class="fa-solid fa-link"></i>
                                    Copy Link
                                </button>
                                ${group.type === 'public' ? `
                                    <button class="option-btn" onclick="addToCalendar('${group.id}')">
                                        <i class="fa-solid fa-calendar-plus"></i>
                                        Add to Calendar
                                    </button>
                                ` : ''}
                                ${group.currentUserRole === 'Admin' ? `
                                    <div class="option-divider"></div>
                                    <button class="option-btn admin-option" onclick="toggleAdminMessageSharing('${group.id}')">
                                        <i class="fa-solid fa-${group.adminSettings?.messageSharing ? 'ban' : 'message'}"></i>
                                        ${group.adminSettings?.messageSharing ? 'Disable' : 'Enable'} Messages
                                    </button>
                                    <button class="option-btn admin-option" onclick="toggleAdminResourceSharing('${group.id}')">
                                        <i class="fa-solid fa-${group.adminSettings?.resourceSharing ? 'lock' : 'folder-open'}"></i>
                                        ${group.adminSettings?.resourceSharing ? 'Disable' : 'Enable'} Resources
                                    </button>
                                    <button class="option-btn admin-option danger" onclick="confirmDeleteGroupFromMenu('${group.id}')">
                                        <i class="fa-solid fa-trash"></i>
                                        Delete Group
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        
        function handleGroupClick(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group) return;

            
            if (userMemberships.includes(groupId)) {
                
                showGroupDetails(group);
            } else if (group.type === 'public') {
                
                showGroupDetails(group);
            } else {
                
                showPrivateGroupAccessModal(group);
            }
        }

        
        function handleJoinClick(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group) return;

            if (userMemberships.includes(groupId)) {
                
                showGroupDetails(group);
            } else if (group.type === 'public') {
                
                joinGroup(group);
            } else {
                
                showGroupJoinModal(group);
            }
        }

        
        function showGroupDetails(group) {
            console.log('Showing group details for:', group.name);
            currentGroup = group;
            const modal = document.getElementById('groupDetailsModal');
            
            if (!modal) {
                console.error('Group details modal not found!');
                return;
            }
            
            
            document.getElementById('groupDetailsAvatar').textContent = group.avatar;
            document.getElementById('groupDetailsName').textContent = group.name;
            document.getElementById('groupDetailsMembers').textContent = `${group.memberCount} members`;
            document.getElementById('groupDetailsSubject').textContent = group.subject;
            document.getElementById('groupDetailsPrivacy').innerHTML = group.type === 'private' ? ' Private' : ' Public';
            document.getElementById('groupDetailsDescription').textContent = group.description;
            
            
            const isMember = userMemberships.includes(group.id);
            const joinActions = document.getElementById('groupJoinActions');
            
            if (!isMember) {
                joinActions.style.display = 'block';
                
                
                if (group.type === 'private') {
                    document.getElementById('accessCodeSection').style.display = 'none';
                    
                    document.getElementById('joinGroupBtn').innerHTML = '<i class="fa-solid fa-user-plus"></i> Join Group';
                } else {
                    document.getElementById('accessCodeSection').style.display = 'none';
                    document.getElementById('joinGroupBtn').innerHTML = '<i class="fa-solid fa-user-plus"></i> Join Group';
                }
            } else {
                joinActions.style.display = 'none';
            }
            
            
            const adminTab = document.getElementById('adminTab');
            const isAdmin = group.currentUserRole === 'Admin';
            if (isAdmin && isMember) {
                adminTab.style.display = 'block';
                updateAdminControls(group);
            } else {
                adminTab.style.display = 'none';
            }
            
            
            renderMembers(group);
            switchTab('members');
            
            
            console.log('Showing group details modal');
            modal.classList.add('active');
            
            
            setTimeout(() => {
                if (modal.classList.contains('active')) {
                    console.log('Group details modal is now active');
                } else {
                    console.error('Group details modal failed to activate');
                }
            }, 50);
        }

        
        function switchTab(tabName) {
            
            document.querySelectorAll('.details-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.getElementById(`${tabName}Panel`).classList.add('active');
            
            
            if (currentGroup) {
                switch(tabName) {
                    case 'members':
                        renderMembers(currentGroup);
                        break;
                    case 'resources':
                        renderResources(currentGroup);
                        break;
                    case 'messages':
                        renderMessages(currentGroup);
                        break;
                }
            }
        }

        
        function renderMembers(group) {
            const container = document.getElementById('membersList');
            const isCurrentUserAdmin = group.currentUserRole === 'Admin';
            
            container.innerHTML = group.members.map(member => `
                <div class="member-card">
                    <div class="member-info">
                        <div class="member-avatar">${member.avatar}</div>
                        <div class="member-details">
                            <h4>${member.name}</h4>
                            <div class="member-role">${member.role}</div>
                            <div class="member-status">
                                <div class="status-dot ${member.status}"></div>
                                ${member.status}
                            </div>
                        </div>
                    </div>
                    ${isCurrentUserAdmin && member.role !== 'Admin' ? `
                        <div class="member-actions">
                            <button class="btn-remove-member" onclick="confirmRemoveMember('${member.id}', '${member.name}')" title="Remove ${member.name} from group">
                                <i class="fa-solid fa-user-minus"></i>
                            </button>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        
        function renderResources(group) {
            const container = document.getElementById('resourcesList');
            const getResourceIcon = (type) => {
                const icons = {
                    pdf: 'fa-file-pdf',
                    doc: 'fa-file-word',
                    video: 'fa-file-video',
                    code: 'fa-file-code',
                    excel: 'fa-file-excel',
                    zip: 'fa-file-zipper'
                };
                return icons[type] || 'fa-file';
            };
            
            container.innerHTML = group.resources.map(resource => `
                <div class="resource-card">
                    <div class="resource-header">
                        <div class="resource-icon">
                            <i class="fa-solid ${getResourceIcon(resource.type)}"></i>
                        </div>
                        <div class="resource-info">
                            <h5>${resource.name}</h5>
                            <div class="resource-meta">${resource.size}  Uploaded ${resource.uploadDate}</div>
                        </div>
                    </div>
                    <div class="resource-description">${resource.description}</div>
                    <div class="resource-actions">
                        <button class="resource-btn" onclick="downloadResource('${resource.id}')">
                            <i class="fa-solid fa-download"></i> Download
                        </button>
                        <button class="resource-btn" onclick="viewResource('${resource.id}')">
                            <i class="fa-solid fa-eye"></i> View
                        </button>
                    </div>
                </div>
            `).join('');
        }

        
        function renderMessages(group) {
            const container = document.getElementById('messagesList');
            const isMember = userMemberships.includes(group.id);
            
            
            container.innerHTML = group.messages.map(message => `
                <div class="message ${message.isOwn ? 'own' : 'other'}">
                    <div class="message-header">
                        <span class="message-sender">${message.sender}</span>
                        <span class="message-time">${message.time}</span>
                    </div>
                    <div class="message-content">${message.content}</div>
                </div>
            `).join('');
            
            
            const messageInputArea = document.getElementById('messageInputArea');
            const messageRestricted = document.getElementById('messageRestricted');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendMessage');
            const joinToMessageBtn = document.getElementById('joinToMessageBtn');
            
            if (isMember) {
                
                messageInputArea.style.display = 'flex';
                messageRestricted.style.display = 'none';
                messageInputArea.classList.remove('disabled');
                messageInput.disabled = false;
                messageInput.placeholder = 'Type your message...';
                sendButton.disabled = false;
            } else {
                
                messageInputArea.style.display = 'none';
                messageRestricted.style.display = 'block';
                
                
                if (group.type === 'private') {
                    joinToMessageBtn.innerHTML = '<i class="fa-solid fa-lock"></i> Request Access';
                    joinToMessageBtn.onclick = () => showPrivateGroupAccessModal(group);
                } else {
                    joinToMessageBtn.innerHTML = '<i class="fa-solid fa-user-plus"></i> Join Group';
                    joinToMessageBtn.onclick = () => {
                        joinGroup(group);
                        
                        setTimeout(() => {
                            if (currentGroup && currentGroup.id === group.id) {
                                renderMessages(group);
                            }
                        }, 1000);
                    };
                }
            }
            
            
            container.scrollTop = container.scrollHeight;
        }

        
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            
            if (!currentGroup || !userMemberships.includes(currentGroup.id)) {
                showNotification('You must be a member of this group to send messages', 'error');
                return;
            }
            
            if (!message) {
                showNotification('Please enter a message', 'warning');
                return;
            }
            
            
            const newMessage = {
                id: currentGroup.messages.length + 1,
                sender: 'You',
                content: message,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                isOwn: true
            };
            
            currentGroup.messages.push(newMessage);
            
            
            renderMessages(currentGroup);
            
            
            input.value = '';
            
            
            showNotification('Message sent!', 'success');
            
            
            setTimeout(() => {
                const responses = [
                    'Great question!',
                    'I agree with that approach.',
                    'Let me check that for you.',
                    'Thanks for sharing!',
                    'That\'s really helpful.',
                    'I have the same question too.',
                    'Could you elaborate on that?',
                    'Interesting point!',
                    'I\'ll try that approach.',
                    'That makes sense!'
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                const members = currentGroup.members.filter(m => m.name !== 'You');
                const randomMember = members[Math.floor(Math.random() * members.length)];
                
                const responseMessage = {
                    id: currentGroup.messages.length + 1,
                    sender: randomMember.name,
                    content: randomResponse,
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                    isOwn: false
                };
                
                currentGroup.messages.push(responseMessage);
                renderMessages(currentGroup);
            }, 1000 + Math.random() * 2000);
        }

        
        function downloadResource(resourceId) {
            if (!currentGroup) return;
            
            const resource = currentGroup.resources.find(r => r.id == resourceId);
            if (!resource) return;
            
            
            showDownloadMessage(`Starting download: ${resource.name}`);
            
            
            let content, mimeType, fileName;
            
            switch(resource.type) {
                case 'pdf':
                    content = generateMockPDF(resource.name, resource.description);
                    mimeType = 'application/pdf';
                    fileName = `${resource.name.replace(/[^a-z0-9]/gi, '_')}.pdf`;
                    break;
                case 'doc':
                    content = generateMockDoc(resource.name, resource.description);
                    mimeType = 'application/msword';
                    fileName = `${resource.name.replace(/[^a-z0-9]/gi, '_')}.doc`;
                    break;
                case 'video':
                    content = generateMockVideo(resource.name);
                    mimeType = 'video/mp4';
                    fileName = `${resource.name.replace(/[^a-z0-9]/gi, '_')}.mp4`;
                    break;
                case 'code':
                    content = generateMockCode(resource.name, resource.description);
                    mimeType = 'text/plain';
                    fileName = `${resource.name.replace(/[^a-z0-9]/gi, '_')}.js`;
                    break;
                case 'excel':
                    content = generateMockExcel(resource.name);
                    mimeType = 'application/vnd.ms-excel';
                    fileName = `${resource.name.replace(/[^a-z0-9]/gi, '_')}.xls`;
                    break;
                case 'zip':
                    content = generateMockZip(resource.name);
                    mimeType = 'application/zip';
                    fileName = `${resource.name.replace(/[^a-z0-9]/gi, '_')}.zip`;
                    break;
                default:
                    content = generateMockText(resource.name, resource.description);
                    mimeType = 'text/plain';
                    fileName = `${resource.name.replace(/[^a-z0-9]/gi, '_')}.txt`;
            }
            
            
            const blob = new Blob([content], { type: mimeType });
            const url = window.URL.createObjectURL(blob);
            
            
            const downloadLink = document.createElement('a');
            downloadLink.href = url;
            downloadLink.download = fileName;
            downloadLink.style.display = 'none';
            
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
            
            
            window.URL.revokeObjectURL(url);
            
            
            setTimeout(() => {
                showDownloadMessage(` Downloaded: ${fileName}`, 'success');
            }, 500);
        }

        
        function generateMockPDF(title, description) {
            return `%PDF-1.4
1 0 obj
<<
/Type /Catalog
/Pages 2 0 R
>>
endobj

2 0 obj
<<
/Type /Pages
/Kids [3 0 R]
/Count 1
>>
endobj

3 0 obj
<<
/Type /Page
/Parent 2 0 R
/MediaBox [0 0 612 792]
/Contents 4 0 R
/Resources <<
/Font <<
/F1 5 0 R
>>
>>
>>
endobj

4 0 obj
<<
/Length 100
>>
stream
BT
/F1 24 Tf
100 700 Td
(${title}) Tj
0 -50 Td
/F1 12 Tf
(${description}) Tj
ET
endstream
endobj

5 0 obj
<<
/Type /Font
/Subtype /Type1
/BaseFont /Helvetica
>>
endobj

xref
0 6
0000000000 65535 f 
0000000010 00000 n 
0000000053 00000 n 
0000000125 00000 n 
0000000348 00000 n 
0000000565 00000 n 
trailer
<<
/Size 6
/Root 1 0 R
>>
startxref
625
%%EOF`;
        }

        function generateMockDoc(title, description) {
            return `${title}

${description}

This is a mock document file generated for demonstration purposes.
In a real application, this would be the actual document content.

Study Group Resource
Generated: ${new Date().toLocaleDateString()}

Content includes:
- Key concepts and definitions
- Practice problems and solutions
- Reference materials and links
- Additional study resources

For more information, contact the group administrator.`;
        }

        function generateMockVideo(title) {
            return `# ${title} - Video File

This is a placeholder for the video file: ${title}

In a real application, this would be the actual video binary data.
Video specifications:
- Format: MP4
- Duration: Varies
- Quality: HD
- Generated: ${new Date().toLocaleDateString()}

Note: This is a mock download for demonstration purposes.`;
        }

        function generateMockCode(title, description) {
            return `


function studyGroupResource() {
    console.log("Welcome to ${title}!");
    
    
    const concepts = [
        "Data structures",
        "Algorithms",
        "Problem solving",
        "Code optimization"
    ];
    
    concepts.forEach(concept => {
        console.log(\`Studying: \${concept}\`);
    });
}


studyGroupResource();


const utils = {
    formatDate: (date) => date.toLocaleDateString(),
    generateId: () => Math.random().toString(36).substr(2, 9),
    validateInput: (input) => input && input.trim().length > 0
};


if (typeof module !== 'undefined') {
    module.exports = { studyGroupResource, utils };
}`;
        }

        function generateMockExcel(title) {
            return `${title} - Excel Data

Date,Topic,Progress,Score,Notes
${new Date().toLocaleDateString()},Introduction,100%,95,Excellent understanding
${new Date().toLocaleDateString()},Basic Concepts,85%,88,Good progress
${new Date().toLocaleDateString()},Advanced Topics,70%,82,Need more practice
${new Date().toLocaleDateString()},Practice Problems,90%,91,Well done
${new Date().toLocaleDateString()},Review,75%,86,Continue studying

Summary:
Average Score: 88.4%
Total Topics: 5
Completion Rate: 84%

Note: This is mock Excel data for demonstration purposes.`;
        }

        function generateMockZip(title) {
            return `PK\x03\x04\x14\x00\x00\x00\x08\x00
Mock ZIP file: ${title}
Generated: ${new Date().toLocaleDateString()}

This archive would contain:
- Study materials
- Practice exercises  
- Reference documents
- Additional resources

Note: This is a mock ZIP file for demonstration purposes.
In a real application, this would be a proper ZIP archive.
PK\x05\x06\x00\x00\x00\x00\x01\x00\x01\x00.\x00\x00\x00\x00\x00\x00\x00`;
        }

        function generateMockText(title, description) {
            return `${title}

${description}

Study Group Resource Document
Generated: ${new Date().toLocaleDateString()}

This document contains important study materials and information
for group members. In a real application, this would contain
the actual educational content, notes, and resources.

Key Topics:
- Fundamental concepts
- Practice exercises
- Study guides
- Reference materials

For questions or additional resources, contact the group administrator.

---
This is a mock file generated for demonstration purposes.`;
        }

        function showDownloadMessage(message, type = 'info') {
            const messageDiv = document.createElement('div');
            const bgColor = type === 'success' ? 'rgba(34, 197, 94, 0.9)' : 'rgba(59, 130, 246, 0.9)';
            const icon = type === 'success' ? 'fa-check-circle' : 'fa-download';
            
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${bgColor};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 12px;
                z-index: 10001;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                font-weight: 500;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                backdrop-filter: blur(10px);
                animation: slideInRight 0.3s ease;
            `;
            
            messageDiv.innerHTML = `
                <i class="fa-solid ${icon}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    if (document.body.contains(messageDiv)) {
                        document.body.removeChild(messageDiv);
                    }
                }, 300);
            }, type === 'success' ? 2500 : 1500);
        }

        function viewResource(resourceId) {
            if (!currentGroup) return;
            
            const resource = currentGroup.resources.find(r => r.id == resourceId);
            if (!resource) return;
            
            
            const viewerDiv = document.createElement('div');
            viewerDiv.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;
            
            const content = generatePreviewContent(resource);
            
            viewerDiv.innerHTML = `
                <div style="
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 20px;
                    padding: 2rem;
                    max-width: 80%;
                    max-height: 80%;
                    overflow-y: auto;
                    backdrop-filter: blur(20px);
                    position: relative;
                ">
                    <button onclick="this.parentElement.parentElement.remove()" style="
                        position: absolute;
                        top: 1rem;
                        right: 1rem;
                        background: transparent;
                        border: none;
                        color: #94a3b8;
                        font-size: 1.5rem;
                        cursor: pointer;
                    ">
                        <i class="fa-solid fa-times"></i>
                    </button>
                    
                    <h3 style="color: white; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fa-solid fa-eye"></i>
                        ${resource.name}
                    </h3>
                    
                    <div style="color: #cbd5e0; background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px; font-family: monospace; white-space: pre-wrap; line-height: 1.4; max-height: 400px; overflow-y: auto;">
${content}
                    </div>
                    
                    <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                        <button onclick="downloadResource(${resource.id})" style="
                            padding: 0.8rem 1.5rem;
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            border: none;
                            border-radius: 12px;
                            color: white;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                        ">
                            <i class="fa-solid fa-download"></i>
                            Download
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(viewerDiv);
            
            
            viewerDiv.addEventListener('click', (e) => {
                if (e.target === viewerDiv) {
                    viewerDiv.remove();
                }
            });
        }

        function generatePreviewContent(resource) {
            switch(resource.type) {
                case 'pdf':
                    return ` PDF Document Preview

Title: ${resource.name}
Description: ${resource.description}

This is a preview of the PDF document. 
The full content would be displayed here in a real application.

Key sections:
- Introduction
- Main concepts  
- Examples and exercises
- References

Use the download button to get the full PDF file.`;

                case 'code':
                    return ` Code File Preview

Title: ${resource.name}
Description: ${resource.description}

function example() {
    console.log("This is sample code");
    
    const data = {
        title: "${resource.name}",
        type: "educational resource"
    };
    
    return data;
}

This is a preview of the code file. Download to view the complete source code.`;

                case 'video':
                    return ` Video File Preview

Title: ${resource.name}
Description: ${resource.description}

Video Details:
- Format: MP4
- Quality: HD
- Duration: Educational content

This is a preview placeholder.
Download the file to view the actual video content.`;

                default:
                    return ` ${resource.type.toUpperCase()} File Preview

${resource.name}

${resource.description}

File contents would be displayed here.
Download to access the full file.

Generated: ${new Date().toLocaleDateString()}`;
            }
        }

        
        function showPrivateGroupAccessModal(group) {
            currentGroup = group;
            const modal = document.getElementById('privateAccessModal');
            const groupNameDisplay = document.getElementById('privateGroupNameDisplay');
            const accessCodeInput = document.getElementById('privateAccessCode');
            const errorMessage = document.getElementById('privateErrorMessage');
            const successMessage = document.getElementById('privateSuccessMessage');
            
            groupNameDisplay.textContent = `Enter the access code to view "${group.name}"`;
            accessCodeInput.value = '';
            errorMessage.style.display = 'none';
            successMessage.style.display = 'none';
            
            modal.classList.add('active');
            accessCodeInput.focus();
        }

        
        function hidePrivateAccessModal() {
            console.log('Hiding private access modal');
            const modal = document.getElementById('privateAccessModal');
            modal.classList.remove('active');
            
            
            document.getElementById('privateAccessCode').value = '';
            document.getElementById('privateErrorMessage').style.display = 'none';
            document.getElementById('privateSuccessMessage').style.display = 'none';
            
            
            
        }

        
        function showGroupJoinModal(group) {
            currentGroup = group;
            
            
            showGroupDetails(group);
        }

        
        function verifyPrivateAccess() {
            if (!currentGroup) return;
            
            const accessCode = document.getElementById('privateAccessCode').value;
            const errorMessage = document.getElementById('privateErrorMessage');
            const successMessage = document.getElementById('privateSuccessMessage');
            
            if (accessCode === currentGroup.accessCode) {
                
                errorMessage.style.display = 'none';
                successMessage.style.display = 'block';
                
                setTimeout(() => {
                    
                    const privateModal = document.getElementById('privateAccessModal');
                    privateModal.classList.remove('active');
                    
                    
                    setTimeout(() => {
                        showGroupDetails(currentGroup);
                    }, 100);
                }, 1500);
            } else {
                
                errorMessage.style.display = 'block';
                successMessage.style.display = 'none';
                
                
                const input = document.getElementById('privateAccessCode');
                input.style.animation = 'none';
                setTimeout(() => {
                    input.style.animation = 'shake 0.5s ease-in-out';
                    input.focus();
                }, 10);
            }
        }

        
        function joinGroup(group) {
            
            
            
            
            userMemberships.push(group.id);
            
            
            const joinActions = document.getElementById('groupJoinActions');
            if (joinActions) {
                joinActions.style.display = 'none';
            }
            
            
            showLoadingMessage(`Welcome to ${group.name}! `);
            
            
            setTimeout(() => {
                renderGroups();
                
                if (currentGroup && currentGroup.id === group.id) {
                    showGroupDetails(group);
                    
                    setTimeout(() => {
                        switchTab('messages');
                        showNotification('You can now send messages in this group!', 'success');
                    }, 500);
                }
            }, 1500);
        }

        
        function showLoadingMessage(message) {
            const loadingDiv = document.createElement('div');
            loadingDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 2rem;
                border-radius: 12px;
                z-index: 10000;
                text-align: center;
                backdrop-filter: blur(10px);
            `;
            loadingDiv.innerHTML = `
                <i class="fa-solid fa-check-circle" style="font-size: 2rem; margin-bottom: 1rem; color: #22c55e;"></i>
                <div style="font-size: 1.1rem; font-weight: 600;">${message}</div>
            `;
            document.body.appendChild(loadingDiv);
            
            setTimeout(() => {
                document.body.removeChild(loadingDiv);
            }, 2000);
        }

        
        function hideGroupDetailsModal() {
            const modal = document.getElementById('groupDetailsModal');
            modal.classList.remove('active');
            currentGroup = null;
        }

        
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const filter = tab.dataset.filter;
                let filteredGroups = groups;
                
                if (filter === 'public') {
                    filteredGroups = groups.filter(g => g.type === 'public');
                } else if (filter === 'private') {
                    filteredGroups = groups.filter(g => g.type === 'private');
                } else if (filter === 'my-groups') {
                    filteredGroups = groups.slice(0, 2); 
                }
                
                renderGroups(filteredGroups);
            });
        });

        
        document.getElementById('groupSearch').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filteredGroups = groups.filter(g => 
                g.name.toLowerCase().includes(query) ||
                g.description.toLowerCase().includes(query) ||
                g.subject.toLowerCase().includes(query)
            );
            renderGroups(filteredGroups);
        });

        
        document.getElementById('createGroupBtn').addEventListener('click', () => {
            showCreateGroupModal();
        });

        
        document.getElementById('closeModal').addEventListener('click', hideGroupDetailsModal);
        document.getElementById('cancelModal').addEventListener('click', hideGroupDetailsModal);

        
        document.getElementById('closePrivateModal').addEventListener('click', hidePrivateAccessModal);
        document.getElementById('cancelPrivateModal').addEventListener('click', hidePrivateAccessModal);

        
        document.querySelectorAll('.details-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                switchTab(tabName);
            });
        });

        
        document.getElementById('sendMessage').addEventListener('click', (e) => {
            e.preventDefault();
            sendMessage();
        });
        
        document.getElementById('messageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                sendMessage();
            }
        });

        
        document.getElementById('messageInput').addEventListener('focus', () => {
            if (currentGroup && !userMemberships.includes(currentGroup.id)) {
                document.getElementById('messageInput').blur();
                showNotification('Join the group to participate in discussions', 'info');
            }
        });

        
        document.getElementById('joinGroupBtn').addEventListener('click', () => {
            if (currentGroup) {
                joinGroup(currentGroup);
            }
        });

        
        document.getElementById('privateAccessForm').addEventListener('submit', (e) => {
            e.preventDefault();
            verifyPrivateAccess();
        });

        
        document.getElementById('groupDetailsModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                hideGroupDetailsModal();
            }
        });

        document.getElementById('privateAccessModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                hidePrivateAccessModal();
            }
        });

        
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-resource-btn') || e.target.closest('.add-resource-btn')) {
                alert('Add Resource functionality would open a file upload modal here!');
            }
        });

        
        function toggleGroupOptions(groupId, event) {
            if (event) event.stopPropagation();
            
            const menu = document.getElementById(`options-${groupId}`);
            if (!menu) return;
            
            
            document.querySelectorAll('.group-options-menu').forEach(m => {
                if (m !== menu && m.style.display === 'block') {
                    m.classList.remove('show');
                    m.style.display = 'none';
                }
            });
            
            
            const isVisible = menu.style.display === 'block';
            
            if (!isVisible) {
                
                const button = event ? event.target.closest('.btn-more') : null;
                if (button) {
                    requestAnimationFrame(() => {
                        const rect = button.getBoundingClientRect();
                        const menuWidth = 220;
                        const viewportWidth = window.innerWidth;
                        const viewportHeight = window.innerHeight;
                        
                        
                        let left = rect.right - menuWidth;
                        let top = rect.bottom + 8;
                        
                        
                        if (left < 15) {
                            left = rect.left;
                        }
                        if (left + menuWidth > viewportWidth - 15) {
                            left = viewportWidth - menuWidth - 15;
                        }
                        
                        
                        menu.style.display = 'block';
                        menu.classList.remove('show');
                        
                        const menuHeight = menu.offsetHeight;
                        
                        
                        if (top + menuHeight > viewportHeight - 15) {
                            top = rect.top - menuHeight - 8;
                            if (top < 15) {
                                top = Math.min(rect.bottom + 8, viewportHeight - menuHeight - 15);
                            }
                        }
                        
                        
                        menu.style.left = left + 'px';
                        menu.style.top = top + 'px';
                        
                        
                        setTimeout(() => menu.classList.add('show'), 10);
                    });
                } else {
                    menu.style.display = 'block';
                    menu.classList.add('show');
                }
            } else {
                menu.classList.remove('show');
                setTimeout(() => {
                    if (!menu.classList.contains('show')) {
                        menu.style.display = 'none';
                    }
                }, 200);
            }
        }

        
        function leaveGroup(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group) return;
            
            
            document.querySelectorAll('.group-options-menu').forEach(menu => {
                menu.style.display = 'none';
            });
            
            
            const confirmDialog = document.createElement('div');
            confirmDialog.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.85);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10002;
                backdrop-filter: blur(15px);
                animation: fadeIn 0.3s ease;
            `;
            
            confirmDialog.innerHTML = `
                <div style="
                    background: rgba(15, 15, 35, 0.95);
                    border: 2px solid rgba(239, 68, 68, 0.3);
                    border-radius: 20px;
                    padding: 2.5rem;
                    max-width: 450px;
                    width: 90%;
                    backdrop-filter: blur(20px);
                    text-align: center;
                    box-shadow: 0 20px 50px rgba(239, 68, 68, 0.2);
                    animation: scaleIn 0.3s ease;
                ">
                    <div style="color: #ef4444; font-size: 4rem; margin-bottom: 1.5rem; animation: pulse 2s infinite;">
                        <i class="fa-solid fa-sign-out-alt"></i>
                    </div>
                    <h3 style="color: white; margin-bottom: 1rem; font-size: 1.5rem; font-weight: 700;">Leave Group?</h3>
                    <p style="color: #cbd5e0; margin-bottom: 2.5rem; line-height: 1.6; font-size: 1rem;">
                        Are you sure you want to leave <strong style="color: #ef4444;">${group.name}</strong>?<br>
                        <span style="color: #94a3b8; font-size: 0.9rem;">You'll lose access to all group content, messages, and resources.</span>
                    </p>
                    <div style="display: flex; gap: 1rem;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                            flex: 1;
                            padding: 1rem 1.5rem;
                            background: rgba(255, 255, 255, 0.08);
                            border: 2px solid rgba(255, 255, 255, 0.2);
                            border-radius: 12px;
                            color: #cbd5e0;
                            cursor: pointer;
                            font-weight: 600;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.background='rgba(255,255,255,0.15)'" onmouseout="this.style.background='rgba(255,255,255,0.08)'">
                            <i class="fa-solid fa-times"></i> Cancel
                        </button>
                        <button onclick="confirmLeaveGroup('${groupId}'); this.parentElement.parentElement.parentElement.remove();" style="
                            flex: 1;
                            padding: 1rem 1.5rem;
                            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                            border: none;
                            border-radius: 12px;
                            color: white;
                            cursor: pointer;
                            font-weight: 700;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(239,68,68,0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(239,68,68,0.4)'">
                            <i class="fa-solid fa-sign-out-alt"></i> Leave Group
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(confirmDialog);
            
            
            confirmDialog.addEventListener('click', (e) => {
                if (e.target === confirmDialog) {
                    confirmDialog.remove();
                }
            });
        }

        function confirmLeaveGroup(groupId) {
            
            userMemberships = userMemberships.filter(id => id !== groupId);
            
            
            showNotification('You have left the group successfully', 'info');
            
            
            renderGroups();
            
            
            if (currentGroup && currentGroup.id === groupId) {
                hideGroupDetailsModal();
            }
        }

        
        function muteGroup(groupId) {
            const group = groups.find(g => g.id === groupId);
            showNotification(`Notifications muted for ${group.name}`, 'success');
            document.getElementById(`options-${groupId}`).style.display = 'none';
        }

        
        function favoriteGroup(groupId) {
            const group = groups.find(g => g.id === groupId);
            showNotification(`${group.name} added to favorites!`, 'success');
            document.getElementById(`options-${groupId}`).style.display = 'none';
        }

        
        function shareGroup(groupId) {
            const group = groups.find(g => g.id === groupId);
            const shareUrl = `https://studybuddy.com/groups/${groupId}`;
            
            
            if (navigator.share) {
                navigator.share({
                    title: group.name,
                    text: `Join me in the ${group.name} study group!`,
                    url: shareUrl
                }).then(() => {
                    showNotification('Group shared successfully!', 'success');
                }).catch(() => {
                    
                    copyToClipboard(`Join me in the ${group.name} study group! ${shareUrl}`);
                });
            } else {
                
                copyToClipboard(`Join me in the ${group.name} study group! ${shareUrl}`);
            }
            
            document.getElementById(`options-${groupId}`).style.display = 'none';
        }

        
        function reportGroup(groupId) {
            const group = groups.find(g => g.id === groupId);
            
            const reportModal = document.createElement('div');
            reportModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;
            
            reportModal.innerHTML = `
                <div style="
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 20px;
                    padding: 2rem;
                    max-width: 400px;
                    width: 90%;
                    backdrop-filter: blur(20px);
                ">
                    <h3 style="color: white; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fa-solid fa-flag" style="color: #f97316;"></i>
                        Report Group
                    </h3>
                    <p style="color: #cbd5e0; margin-bottom: 1.5rem;">
                        Why are you reporting <strong>${group.name}</strong>?
                    </p>
                    <select id="reportReason" style="
                        width: 100%;
                        padding: 0.8rem;
                        background: rgba(255, 255, 255, 0.1);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        border-radius: 12px;
                        color: white;
                        margin-bottom: 1.5rem;
                    ">
                        <option value="">Select a reason...</option>
                        <option value="inappropriate">Inappropriate content</option>
                        <option value="spam">Spam or fake group</option>
                        <option value="harassment">Harassment or abuse</option>
                        <option value="copyright">Copyright violation</option>
                        <option value="other">Other</option>
                    </select>
                    <div style="display: flex; gap: 1rem;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                            flex: 1;
                            padding: 0.8rem 1.5rem;
                            background: rgba(255, 255, 255, 0.1);
                            border: 1px solid rgba(255, 255, 255, 0.2);
                            border-radius: 12px;
                            color: #cbd5e0;
                            cursor: pointer;
                        ">Cancel</button>
                        <button onclick="submitReport('${groupId}'); this.parentElement.parentElement.parentElement.remove();" style="
                            flex: 1;
                            padding: 0.8rem 1.5rem;
                            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
                            border: none;
                            border-radius: 12px;
                            color: white;
                            cursor: pointer;
                            font-weight: 600;
                        ">Submit Report</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(reportModal);
            document.getElementById(`options-${groupId}`).style.display = 'none';
        }

        function submitReport(groupId) {
            const reason = document.getElementById('reportReason').value;
            if (reason) {
                showNotification('Report submitted successfully. Thank you!', 'success');
            } else {
                showNotification('Please select a reason for reporting', 'error');
            }
        }

        
        function copyGroupLink(groupId) {
            const group = groups.find(g => g.id === groupId);
            const groupUrl = `https://studybuddy.com/groups/${groupId}`;
            copyToClipboard(groupUrl);
            document.getElementById(`options-${groupId}`).style.display = 'none';
        }

        
        function addToCalendar(groupId) {
            const group = groups.find(g => g.id === groupId);
            showNotification(`${group.name} study sessions added to your calendar!`, 'success');
            document.getElementById(`options-${groupId}`).style.display = 'none';
        }

        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Copied to clipboard!', 'success');
            }).catch(() => {
                showNotification('Failed to copy to clipboard', 'error');
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: 'rgba(34, 197, 94, 0.9)',
                error: 'rgba(239, 68, 68, 0.9)',
                info: 'rgba(59, 130, 246, 0.9)',
                warning: 'rgba(245, 158, 11, 0.9)'
            };
            
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                info: 'fa-info-circle',
                warning: 'fa-exclamation-triangle'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${colors[type]};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 12px;
                z-index: 10001;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                font-weight: 500;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                backdrop-filter: blur(10px);
                animation: slideInRight 0.3s ease;
            `;
            
            notification.innerHTML = `
                <i class="fa-solid ${icons[type]}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        
        let closeMenuTimeout;
        document.addEventListener('click', (e) => {
            
            clearTimeout(closeMenuTimeout);
            closeMenuTimeout = setTimeout(() => {
                if (!e.target.closest('.group-options-container')) {
                    const visibleMenus = document.querySelectorAll('.group-options-menu.show');
                    if (visibleMenus.length > 0) {
                        visibleMenus.forEach(menu => {
                            menu.classList.remove('show');
                            setTimeout(() => menu.style.display = 'none', 200);
                        });
                    }
                }
            }, 10);
        });

        
        let selectedTags = [];
        let selectedEmoji = '';

        
        function showCreateGroupModal() {
            const modal = document.getElementById('createGroupModal');
            modal.classList.add('active');
            
            
            document.getElementById('createGroupForm').reset();
            selectedTags = [];
            selectedEmoji = '';
            document.getElementById('groupEmoji').value = selectedEmoji;
            
            
            document.getElementById('typePublic').checked = true;
            document.getElementById('typePrivate').checked = false;
            
            
            updateTagsDisplay();
            updateCharCounters();
            togglePrivacySettings(); 
            
            
            setTimeout(() => {
                document.getElementById('groupName').focus();
            }, 100);
        }

        
        function hideCreateGroupModal() {
            const modal = document.getElementById('createGroupModal');
            modal.classList.remove('active');
        }

        
        function updateCharCounters() {
            const nameInput = document.getElementById('groupName');
            const descInput = document.getElementById('groupDescription');
            
            const nameCounter = nameInput.parentElement.querySelector('.char-counter');
            const descCounter = descInput.parentElement.querySelector('.char-counter');
            
            nameCounter.textContent = `${nameInput.value.length}/50`;
            descCounter.textContent = `${descInput.value.length}/200`;
            
            
            updateCounterColor(nameCounter, nameInput.value.length, 50);
            updateCounterColor(descCounter, descInput.value.length, 200);
        }

        function updateCounterColor(counter, current, max) {
            counter.classList.remove('warning', 'danger');
            if (current > max * 0.9) {
                counter.classList.add('danger');
            } else if (current > max * 0.7) {
                counter.classList.add('warning');
            }
        }

        
        function togglePrivacySettings() {
            const publicRadio = document.getElementById('typePublic');
            const privateRadio = document.getElementById('typePrivate');
            const accessCodeRow = document.getElementById('accessCodeRow');
            const accessCodeInput = document.getElementById('accessCode');
            
            console.log('=== PRIVACY TOGGLE CALLED ===');
            console.log('Public radio checked:', publicRadio.checked);
            console.log('Private radio checked:', privateRadio.checked);
            console.log('Access code row element:', accessCodeRow);
            console.log('Access code input element:', accessCodeInput);
            
            if (privateRadio.checked) {
                accessCodeRow.style.display = 'block';
                accessCodeInput.required = true;
                console.log('Showing access code field');
            } else {
                accessCodeRow.style.display = 'none';
                accessCodeInput.required = false;
                accessCodeInput.value = '';
                console.log('Hiding access code field');
            }
        }

        
        function showEmojiPicker() {
            const emojis = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];
            
            const picker = document.createElement('div');
            picker.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(15, 15, 35, 0.95);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 16px;
                padding: 1.5rem;
                backdrop-filter: blur(20px);
                z-index: 10001;
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 0.5rem;
            `;
            
            emojis.forEach(emoji => {
                const emojiBtn = document.createElement('button');
                emojiBtn.textContent = emoji;
                emojiBtn.style.cssText = `
                    padding: 0.8rem;
                    border: 2px solid rgba(255, 255, 255, 0.1);
                    border-radius: 8px;
                    background: rgba(255, 255, 255, 0.05);
                    font-size: 1.5rem;
                    cursor: pointer;
                    transition: all 0.3s ease;
                `;
                
                emojiBtn.addEventListener('mouseover', () => {
                    emojiBtn.style.borderColor = '#667eea';
                    emojiBtn.style.background = 'rgba(102, 126, 234, 0.15)';
                });
                
                emojiBtn.addEventListener('mouseout', () => {
                    emojiBtn.style.borderColor = 'rgba(255, 255, 255, 0.1)';
                    emojiBtn.style.background = 'rgba(255, 255, 255, 0.05)';
                });
                
                emojiBtn.addEventListener('click', () => {
                    selectedEmoji = emoji;
                    document.getElementById('groupEmoji').value = emoji;
                    document.body.removeChild(picker);
                });
                
                picker.appendChild(emojiBtn);
            });
            
            document.body.appendChild(picker);
            
            
            picker.addEventListener('click', (e) => {
                e.stopPropagation();
            });
            
            document.addEventListener('click', function closePicker() {
                if (document.body.contains(picker)) {
                    document.body.removeChild(picker);
                }
                document.removeEventListener('click', closePicker);
            });
        }

        
        function addTag(tagText) {
            const tag = tagText.trim().toLowerCase();
            if (tag && !selectedTags.includes(tag) && selectedTags.length < 10) {
                selectedTags.push(tag);
                updateTagsDisplay();
                document.getElementById('groupTags').value = '';
            }
        }

        function removeTag(tagToRemove) {
            selectedTags = selectedTags.filter(tag => tag !== tagToRemove);
            updateTagsDisplay();
        }

        function updateTagsDisplay() {
            const container = document.getElementById('tagsContainer');
            container.innerHTML = selectedTags.map(tag => `
                <span class="tag">
                    ${tag}
                    <span class="tag-remove" onclick="removeTag('${tag}')">
                        <i class="fa-solid fa-times"></i>
                    </span>
                </span>
            `).join('');
        }

        
        function validateCreateGroupForm() {
            const name = document.getElementById('groupName').value.trim();
            const subject = document.getElementById('groupSubject').value;
            const description = document.getElementById('groupDescription').value.trim();
            const groupTypeRadio = document.querySelector('input[name="groupType"]:checked');
            const isPrivate = groupTypeRadio ? groupTypeRadio.value === 'private' : false;
            const accessCodeElement = document.getElementById('accessCode');
            const accessCode = accessCodeElement ? accessCodeElement.value.trim() : '';

            console.log('=== DETAILED VALIDATION DEBUG ===');
            console.log('Name:', name);
            console.log('Subject:', subject);
            console.log('Description:', description);
            console.log('Radio button found:', groupTypeRadio);
            console.log('Is Private:', isPrivate);
            console.log('Access code element:', accessCodeElement);
            console.log('Access code value:', accessCode);
            console.log('Access code length:', accessCode.length);
            console.log('Private radio checked:', document.getElementById('typePrivate').checked);
            console.log('Public radio checked:', document.getElementById('typePublic').checked);
            console.log('Access code row display:', document.getElementById('accessCodeRow').style.display);
            console.log('==================================');

            if (!name) {
                showNotification('Please enter a group name', 'error');
                document.getElementById('groupName').focus();
                return false;
            }

            if (!subject) {
                showNotification('Please select a subject category', 'error');
                document.getElementById('groupSubject').focus();
                return false;
            }

            if (!description) {
                showNotification('Please add a group description', 'error');
                document.getElementById('groupDescription').focus();
                return false;
            }

            
            if (isPrivate) {
                console.log('Private group selected - checking access code...');
                console.log('Access code check - isEmpty:', !accessCode);
                console.log('Access code check - tooShort:', accessCode.length < 3);
                
                if (!accessCode) {
                    console.log('ERROR: No access code provided for private group');
                    showNotification('Please set an access code for private group', 'error');
                    if (accessCodeElement) {
                        accessCodeElement.focus();
                    }
                    return false;
                }

                if (accessCode.length < 3) {
                    console.log('ERROR: Access code too short');
                    showNotification('Access code must be at least 3 characters long', 'error');
                    if (accessCodeElement) {
                        accessCodeElement.focus();
                    }
                    return false;
                }
                
                console.log('Access code validation passed!');
            }

            if (name.length > 50) {
                showNotification('Group name is too long (max 50 characters)', 'error');
                document.getElementById('groupName').focus();
                return false;
            }

            if (description.length > 200) {
                showNotification('Description is too long (max 200 characters)', 'error');
                document.getElementById('groupDescription').focus();
                return false;
            }

            return true;
        }

        
        function handleCreateGroup(e) {
            e.preventDefault();
            console.log('Form submission started');
            
            if (!validateCreateGroupForm()) {
                console.log('Form validation failed');
                return;
            }
            
            console.log('Form validation passed');
            
            
            const selectedType = document.querySelector('input[name="groupType"]:checked');
            const formData = {
                name: document.getElementById('groupName').value.trim(),
                subject: document.getElementById('groupSubject').value,
                description: document.getElementById('groupDescription').value.trim(),
                emoji: selectedEmoji,
                type: selectedType ? selectedType.value : 'public',
                accessCode: document.getElementById('accessCode').value.trim(),
                memberLimit: document.getElementById('memberLimit').value,
                studyLevel: document.getElementById('studyLevel').value,
                features: {
                    fileSharing: document.getElementById('allowFileSharing').checked,
                    events: document.getElementById('allowEvents').checked,
                    discussions: document.getElementById('allowDiscussions').checked
                },
                tags: selectedTags
            };
            
            console.log('Form data collected:', formData);
            
            
            const newGroup = {
                id: `group_${Date.now()}`,
                name: formData.name,
                description: formData.description,
                subject: formData.subject,
                memberCount: 1, 
                type: formData.type,
                avatar: formData.emoji,
                lastActivity: 'Just created',
                newMessages: 0,
                accessCode: formData.accessCode || undefined,
                memberLimit: formData.memberLimit,
                studyLevel: formData.studyLevel,
                features: formData.features,
                tags: formData.tags,
                members: [
                    { id: 1, name: 'You', role: 'Admin', avatar: 'ME', status: 'online' }
                ],
                resources: [],
                messages: [
                    {
                        id: 1,
                        sender: 'System',
                        content: `Welcome to ${formData.name}! You've successfully created this study group.`,
                        time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                        isOwn: false
                    }
                ]
            };
            
            
            groups.push(newGroup);
            userMemberships.push(newGroup.id);
            
            
            showNotification(`${formData.name} created successfully! `, 'success');
            hideCreateGroupModal();
            
            
            renderGroups();
            
            setTimeout(() => {
                showGroupDetails(newGroup);
                showNotification('You are now the admin of this group!', 'info');
            }, 1000);
        }

        
        document.getElementById('closeCreateModal').addEventListener('click', hideCreateGroupModal);
        document.getElementById('cancelCreate').addEventListener('click', hideCreateGroupModal);
        document.getElementById('createGroupForm').addEventListener('submit', handleCreateGroup);

        
        document.getElementById('groupName').addEventListener('input', updateCharCounters);
        document.getElementById('groupDescription').addEventListener('input', updateCharCounters);

        
        document.getElementById('typePublic').addEventListener('change', togglePrivacySettings);
        document.getElementById('typePrivate').addEventListener('change', togglePrivacySettings);
        
        
        document.getElementById('typePublic').addEventListener('click', togglePrivacySettings);
        document.getElementById('typePrivate').addEventListener('click', togglePrivacySettings);

        
        document.getElementById('groupTags').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                addTag(e.target.value);
            }
        });

        
        document.getElementById('createGroupModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                hideCreateGroupModal();
            }
        });

        
        renderGroups();

        
        function handleDashboardNavigation() {
            const selectedGroupId = localStorage.getItem('selectedGroupId');
            if (selectedGroupId) {
                
                const groupElement = document.querySelector(`[data-id="${selectedGroupId}"]`);
                if (groupElement) {
                    
                    groupElement.style.transform = 'scale(1.02)';
                    groupElement.style.boxShadow = '0 8px 25px rgba(102, 126, 234, 0.4)';
                    groupElement.style.border = '2px solid #667eea';
                    
                    
                    groupElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    
                    
                    setTimeout(() => {
                        groupElement.style.transform = '';
                        groupElement.style.boxShadow = '';
                        groupElement.style.border = '';
                    }, 3000);
                }
                
                
                localStorage.removeItem('selectedGroupId');
            }
        }

        
        setTimeout(handleDashboardNavigation, 500);

        console.log('Loaded 5 default study groups:', groups);
        console.log('Private group access codes:');
        console.log('Physics Research Lab: physics123');
        console.log('NEET Medical Entrance: neet2024');

        

        
        function updateAdminControls(group) {
            if (!group.adminSettings) return;

            
            const messageSwitch = document.getElementById('messageSwitch');
            const resourceSwitch = document.getElementById('resourceSwitch');

            if (messageSwitch) {
                messageSwitch.classList.toggle('active', group.adminSettings.messageSharing);
            }

            if (resourceSwitch) {
                resourceSwitch.classList.toggle('active', group.adminSettings.resourceSharing);
            }

            
            document.getElementById('deleteGroupName').textContent = group.name;
        }

        
        function toggleMessageSharing() {
            if (!currentGroup || currentGroup.currentUserRole !== 'Admin') return;

            currentGroup.adminSettings.messageSharing = !currentGroup.adminSettings.messageSharing;
            
            const messageSwitch = document.getElementById('messageSwitch');
            messageSwitch.classList.toggle('active', currentGroup.adminSettings.messageSharing);

            
            showNotification(
                `Message sharing ${currentGroup.adminSettings.messageSharing ? 'enabled' : 'disabled'} for ${currentGroup.name}`,
                'success'
            );

            
            updateMessageInterface();
        }

        
        function toggleResourceSharing() {
            if (!currentGroup || currentGroup.currentUserRole !== 'Admin') return;

            currentGroup.adminSettings.resourceSharing = !currentGroup.adminSettings.resourceSharing;
            
            const resourceSwitch = document.getElementById('resourceSwitch');
            resourceSwitch.classList.toggle('active', currentGroup.adminSettings.resourceSharing);

            
            showNotification(
                `Resource sharing ${currentGroup.adminSettings.resourceSharing ? 'enabled' : 'disabled'} for ${currentGroup.name}`,
                'success'
            );

            
            updateResourceInterface();
        }

        
        function updateMessageInterface() {
            const messageInputContainer = document.getElementById('messageInputContainer');
            const messageRestricted = document.getElementById('messageRestricted');
            
            if (!currentGroup.adminSettings.messageSharing) {
                messageInputContainer.style.display = 'none';
                messageRestricted.style.display = 'block';
                messageRestricted.innerHTML = `
                    <div class="restricted-content">
                        <i class="fa-solid fa-ban"></i>
                        <span>Message sharing is disabled by admin</span>
                    </div>
                `;
            } else {
                const isMember = userMemberships.includes(currentGroup.id);
                if (isMember) {
                    messageInputContainer.style.display = 'block';
                    messageRestricted.style.display = 'none';
                } else {
                    messageInputContainer.style.display = 'none';
                    messageRestricted.style.display = 'block';
                    messageRestricted.innerHTML = `
                        <div class="restricted-content">
                            <i class="fa-solid fa-lock"></i>
                            <span>You must be a member to send messages</span>
                            <button class="btn-join-to-message" id="joinToMessageBtn">Join Group</button>
                        </div>
                    `;
                }
            }
        }

        
        function updateResourceInterface() {
            const resourcesList = document.getElementById('resourcesList');
            if (!currentGroup.adminSettings.resourceSharing) {
                
                const downloadButtons = resourcesList.querySelectorAll('.download-btn');
                downloadButtons.forEach(btn => {
                    btn.style.display = currentGroup.currentUserRole === 'Admin' ? 'inline-flex' : 'none';
                });
                
                
                if (currentGroup.currentUserRole !== 'Admin') {
                    const disabledMessage = resourcesList.querySelector('.resources-disabled');
                    if (!disabledMessage) {
                        const messageDiv = document.createElement('div');
                        messageDiv.className = 'resources-disabled';
                        messageDiv.innerHTML = `
                            <div style="text-align: center; padding: 2rem; color: #94a3b8; background: rgba(100, 116, 139, 0.1); border-radius: 8px; margin-top: 1rem;">
                                <i class="fa-solid fa-ban" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                <p>Resource downloads are disabled by admin</p>
                            </div>
                        `;
                        resourcesList.appendChild(messageDiv);
                    }
                }
            } else {
                
                const downloadButtons = resourcesList.querySelectorAll('.download-btn');
                downloadButtons.forEach(btn => {
                    btn.style.display = 'inline-flex';
                });
                
                
                const disabledMessage = resourcesList.querySelector('.resources-disabled');
                if (disabledMessage) {
                    disabledMessage.remove();
                }
            }
        }

        
        function confirmDeleteGroup() {
            if (!currentGroup || currentGroup.currentUserRole !== 'Admin') return;

            document.getElementById('deleteGroupModal').style.display = 'flex';
            document.getElementById('deleteConfirmation').value = '';
            document.getElementById('confirmDeleteBtn').disabled = true;

            
            document.getElementById('deleteConfirmation').oninput = function() {
                const confirmBtn = document.getElementById('confirmDeleteBtn');
                confirmBtn.disabled = this.value !== 'DELETE';
            };
        }

        
        function hideDeleteGroupModal() {
            document.getElementById('deleteGroupModal').style.display = 'none';
            document.getElementById('deleteConfirmation').value = '';
        }

        
        function deleteGroup() {
            if (!currentGroup || currentGroup.currentUserRole !== 'Admin') return;
            
            const confirmation = document.getElementById('deleteConfirmation').value;
            if (confirmation !== 'DELETE') {
                showNotification('Please type DELETE to confirm', 'error');
                return;
            }

            
            const groupIndex = groups.findIndex(g => g.id === currentGroup.id);
            if (groupIndex !== -1) {
                groups.splice(groupIndex, 1);
                
                
                const membershipIndex = userMemberships.indexOf(currentGroup.id);
                if (membershipIndex !== -1) {
                    userMemberships.splice(membershipIndex, 1);
                }
                
                
                renderGroups();
                
                
                hideDeleteGroupModal();
                hideGroupDetailsModal();
                
                showNotification(`Group "${currentGroup.name}" has been deleted`, 'success');
                currentGroup = null;
            }
        }

        
        function removeMember(memberId) {
            if (!currentGroup || currentGroup.currentUserRole !== 'Admin') return;

            const memberIndex = currentGroup.members.findIndex(m => m.id === memberId);
            if (memberIndex !== -1) {
                const memberName = currentGroup.members[memberIndex].name;
                currentGroup.members.splice(memberIndex, 1);
                currentGroup.memberCount--;
                
                
                renderMembers(currentGroup);
                
                showNotification(`Removed ${memberName} from ${currentGroup.name}`, 'success');
            }
        }

        
        const originalRenderMembers = window.renderMembers;
        window.renderMembers = function(group) {
            if (originalRenderMembers) {
                originalRenderMembers(group);
            } else {
                
                const membersList = document.getElementById('membersList');
                if (!membersList) return;

                membersList.innerHTML = group.members.map(member => `
                    <div class="member-item">
                        <div class="member-avatar ${member.status}">${member.avatar}</div>
                        <div class="member-info">
                            <div class="member-name">${member.name}</div>
                            <div class="member-role">${member.role}</div>
                        </div>
                        <div class="member-status ${member.status}"></div>
                        ${group.currentUserRole === 'Admin' && member.role !== 'Admin' ? `
                            <div class="member-admin-actions">
                                <button class="btn-remove-member" onclick="removeMember(${member.id})" title="Remove Member">
                                    <i class="fa-solid fa-user-minus"></i>
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }
        };

        

        
        function toggleAdminMessageSharing(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group || group.currentUserRole !== 'Admin') return;

            group.adminSettings.messageSharing = !group.adminSettings.messageSharing;
            
            showNotification(
                `Message sharing ${group.adminSettings.messageSharing ? 'enabled' : 'disabled'} for ${group.name}`,
                'success'
            );

            
            renderGroups();
            
            
            document.querySelectorAll('.group-options-menu').forEach(menu => {
                menu.style.display = 'none';
            });
        }

        
        function toggleAdminResourceSharing(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group || group.currentUserRole !== 'Admin') return;

            group.adminSettings.resourceSharing = !group.adminSettings.resourceSharing;
            
            showNotification(
                `Resource sharing ${group.adminSettings.resourceSharing ? 'enabled' : 'disabled'} for ${group.name}`,
                'success'
            );

            
            renderGroups();
            
            
            document.querySelectorAll('.group-options-menu').forEach(menu => {
                menu.style.display = 'none';
            });
        }

        
        function confirmDeleteGroupFromMenu(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group || group.currentUserRole !== 'Admin') return;

            
            currentGroup = group;
            
            
            document.querySelectorAll('.group-options-menu').forEach(menu => {
                menu.style.display = 'none';
            });
            
            
            confirmDeleteGroup();
        }

        

        let memberToRemove = null; 

        
        function confirmRemoveMember(memberId, memberName) {
            if (!currentGroup || currentGroup.currentUserRole !== 'Admin') {
                showNotification('Only group admins can remove members', 'error');
                return;
            }

            const member = currentGroup.members.find(m => m.id == memberId);
            if (!member) {
                showNotification('Member not found', 'error');
                return;
            }

            if (member.role === 'Admin') {
                showNotification('Cannot remove other admins from the group', 'error');
                return;
            }

            
            memberToRemove = { id: memberId, name: memberName };

            
            document.getElementById('removeMemberName').textContent = memberName;
            document.getElementById('removeFromGroupName').textContent = currentGroup.name;

            
            document.getElementById('removeMemberModal').style.display = 'flex';
        }

        
        function hideRemoveMemberModal() {
            document.getElementById('removeMemberModal').style.display = 'none';
            memberToRemove = null;
        }

        
        function removeMemberFromGroup() {
            if (!memberToRemove || !currentGroup || currentGroup.currentUserRole !== 'Admin') {
                hideRemoveMemberModal();
                return;
            }

            const memberIndex = currentGroup.members.findIndex(m => m.id == memberToRemove.id);
            if (memberIndex === -1) {
                showNotification('Member not found', 'error');
                hideRemoveMemberModal();
                return;
            }

            
            currentGroup.members.splice(memberIndex, 1);
            currentGroup.memberCount--;

            
            const groupIndex = groups.findIndex(g => g.id === currentGroup.id);
            if (groupIndex !== -1) {
                groups[groupIndex] = currentGroup;
            }

            
            renderMembers(currentGroup);

            
            renderGroups();

            
            showNotification(`${memberToRemove.name} has been removed from ${currentGroup.name}`, 'success');

            
            hideRemoveMemberModal();

            console.log(`Admin removed member: ${memberToRemove.name} from group: ${currentGroup.name}`);
        }

        
        document.getElementById('removeMemberModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                hideRemoveMemberModal();
            }
        });

        

        
        function navigateTo(page) {
            if (page === 'groups') {
                
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                if (event && event.target) {
                    event.target.closest('.nav-btn').classList.add('active');
                }
                return;
            }
            
            
            switch(page) {
                case 'dashboard':
                    createPage('dashboard', 'Dashboard', `
                        <div class="page-content">
                            <div class="dashboard-header">
                                <h1> Study Dashboard</h1>
                                <p>Track your study progress and group activities.</p>
                            </div>
                            <div class="dashboard-grid">
                                <div class="dashboard-card">
                                    <h3> Active Groups</h3>
                                    <div class="dashboard-number">3</div>
                                    <p>You're member of 3 study groups</p>
                                </div>
                                <div class="dashboard-card">
                                    <h3> Upcoming Sessions</h3>
                                    <div class="dashboard-number">5</div>
                                    <p>Study sessions this week</p>
                                </div>
                                <div class="dashboard-card">
                                    <h3> Study Streak</h3>
                                    <div class="dashboard-number">12</div>
                                    <p>Days of consistent study</p>
                                </div>
                                <div class="dashboard-card">
                                    <h3> Goals Complete</h3>
                                    <div class="dashboard-number">8/10</div>
                                    <p>Weekly study goals achieved</p>
                                </div>
                            </div>
                        </div>
                    `);
                    break;
                case 'groups':
                    
                    location.reload();
                    break;
                case 'resources':
                    createPage('resources', 'Resources', `
                        <div class="page-content">
                            <div class="page-header">
                                <h1> Study Resources</h1>
                                <p>Access all your study materials in one place</p>
                            </div>
                            <div class="resources-grid">
                                <div class="resource-category">
                                    <h3> Documents</h3>
                                    <p>PDFs, notes, and study guides</p>
                                    <button class="btn-primary">Browse Documents</button>
                                </div>
                                <div class="resource-category">
                                    <h3> Videos</h3>
                                    <p>Lecture recordings and tutorials</p>
                                    <button class="btn-primary">Watch Videos</button>
                                </div>
                                <div class="resource-category">
                                    <h3> Code</h3>
                                    <p>Programming examples and projects</p>
                                    <button class="btn-primary">View Code</button>
                                </div>
                            </div>
                        </div>
                    `);
                    break;
                case 'schedule':
                    createPage('schedule', 'Schedule', `
                        <div class="page-content">
                            <div class="page-header">
                                <h1> Study Schedule</h1>
                                <p>Manage your study sessions and group meetings</p>
                            </div>
                            <div class="schedule-view">
                                <div class="calendar-placeholder">
                                    <h3> This Week</h3>
                                    <div class="schedule-item">
                                        <strong>Today 2:00 PM</strong> - Mathematics Study Group
                                    </div>
                                    <div class="schedule-item">
                                        <strong>Tomorrow 4:00 PM</strong> - Physics Lab Discussion
                                    </div>
                                    <div class="schedule-item">
                                        <strong>Friday 10:00 AM</strong> - Computer Science Project Review
                                    </div>
                                </div>
                            </div>
                        </div>
                    `);
                    break;
                case 'profile':
                    createPage('profile', 'Profile', `
                        <div class="page-content">
                            <div class="page-header">
                                <h1> Profile</h1>
                                <p>Manage your account and preferences</p>
                            </div>
                            <div class="profile-content">
                                <div class="profile-card">
                                    <div class="profile-avatar"></div>
                                    <h3>Your Name</h3>
                                    <p>Student  Mathematics Major</p>
                                    <button class="btn-primary">Edit Profile</button>
                                </div>
                                <div class="profile-stats">
                                    <h3> Your Stats</h3>
                                    <p>Groups Joined: 3</p>
                                    <p>Resources Shared: 12</p>
                                    <p>Study Hours: 45</p>
                                </div>
                            </div>
                        </div>
                    `);
                    break;
            }
        }

        
        function createPage(pageId, title, content) {
            document.body.innerHTML = `
                <div class="page-container">
                    
                    <nav class="main-nav">
                        <div class="nav-container">
                            <button class="nav-btn ${pageId === 'dashboard' ? 'active' : ''}" onclick="navigateTo('dashboard')">
                                <i class="fa-solid fa-house"></i>
                                <span>Dashboard</span>
                            </button>
                            <button class="nav-btn ${pageId === 'groups' ? 'active' : ''}" onclick="navigateTo('groups')">
                                <i class="fa-solid fa-users"></i>
                                <span>Groups</span>
                            </button>
                            <button class="nav-btn ${pageId === 'resources' ? 'active' : ''}" onclick="navigateTo('resources')">
                                <i class="fa-solid fa-folder-open"></i>
                                <span>Resources</span>
                            </button>
                            <button class="nav-btn ${pageId === 'schedule' ? 'active' : ''}" onclick="navigateTo('schedule')">
                                <i class="fa-solid fa-calendar-days"></i>
                                <span>Schedule</span>
                            </button>
                            <button class="nav-btn ${pageId === 'profile' ? 'active' : ''}" onclick="navigateTo('profile')">
                                <i class="fa-solid fa-user"></i>
                                <span>Profile</span>
                            </button>
                        </div>
                    </nav>

                    ${content}

                    <button class="back-to-groups" onclick="navigateTo('groups')" style="
                        position: fixed;
                        bottom: 2rem;
                        right: 2rem;
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        border: none;
                        border-radius: 50px;
                        padding: 1rem 2rem;
                        color: white;
                        font-weight: 600;
                        cursor: pointer;
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
                        transition: all 0.3s ease;
                        z-index: 1000;
                    ">
                        <i class="fa-solid fa-users"></i> Back to Groups
                    </button>
                </div>
            `;
        }
    </script>

    <style>
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        
        .create-group-container {
            background: rgba(15, 15, 35, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 24px;
            max-width: 700px;
            width: 95%;
            max-height: 90vh;
            backdrop-filter: blur(20px);
            position: relative;
            overflow-y: auto;
        }

        .create-group-container .modal-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .create-group-container .modal-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .create-group-container .modal-header p {
            color: #94a3b8;
            font-size: 0.95rem;
        }

        
        .form-section {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .form-section:last-of-type {
            border-bottom: none;
        }

        .form-section h3 {
            color: #ffffff;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-section h3 i {
            color: #667eea;
        }

        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row:last-child {
            margin-bottom: 0;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #ffffff;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: #94a3b8;
        }

        .form-group select option {
            background: #1a1a3e;
            color: #ffffff;
        }

        .form-group small {
            color: #94a3b8;
            font-size: 0.8rem;
            margin-top: 0.3rem;
        }

        
        .char-counter {
            color: #64748b;
            font-size: 0.75rem;
            text-align: right;
            margin-top: 0.3rem;
        }

        .char-counter.warning {
            color: #f59e0b;
        }

        .char-counter.danger {
            color: #ef4444;
        }

        
        .emoji-selector {
            display: flex;
            gap: 0.5rem;
        }

        .emoji-selector input {
            flex: 1;
            text-align: center;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .emoji-btn {
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emoji-btn:hover {
            border-color: #667eea;
            color: #667eea;
        }

        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .radio-option {
            position: relative;
        }

        .radio-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .radio-option label {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-option input[type="radio"]:checked + label {
            background: rgba(102, 126, 234, 0.15);
            border-color: #667eea;
        }

        .radio-option label i {
            font-size: 1.2rem;
            color: #667eea;
            width: 20px;
            text-align: center;
        }

        .radio-option label div {
            flex: 1;
        }

        .radio-option label strong {
            color: #ffffff;
            display: block;
            margin-bottom: 0.2rem;
        }

        .radio-option label small {
            color: #94a3b8;
            font-size: 0.8rem;
        }

        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.8rem;
        }

        .checkbox-option {
            position: relative;
        }

        .checkbox-option input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .checkbox-option label {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .checkbox-option input[type="checkbox"]:checked + label {
            background: rgba(102, 126, 234, 0.15);
            border-color: #667eea;
        }

        .checkbox-option label i {
            color: #667eea;
            font-size: 1rem;
        }

        
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.8rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            min-height: 40px;
        }

        .tag {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tag-remove {
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .tag-remove:hover {
            opacity: 1;
        }

        
        .form-actions {
            padding: 1.5rem 2rem;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-cancel {
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #94a3b8;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-cancel:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }

        .btn-create {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-create:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        .btn-create:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 6px rgba(102, 126, 234, 0.2);
        }

        
        @media (max-width: 768px) {
            .create-group-container {
                width: 98%;
                max-height: 95vh;
            }

            .form-section {
                padding: 1rem 1.5rem;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .form-actions {
                flex-direction: column-reverse;
                padding: 1rem 1.5rem;
            }
        }

        
        .page-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e3a8a 100%);
            padding-top: 6rem;
        }

        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-header, .dashboard-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-header h1, .dashboard-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 1rem;
        }

        .page-header p, .dashboard-header p {
            font-size: 1.2rem;
            color: #e2e8f0;
        }

        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .dashboard-card h3 {
            color: #e2e8f0;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .dashboard-number {
            font-size: 3rem;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .dashboard-card p {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .resource-category {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .resource-category:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-5px);
        }

        .resource-category h3 {
            color: #ffffff;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .resource-category p {
            color: #94a3b8;
            margin-bottom: 2rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            padding: 0.8rem 2rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        
        .schedule-view {
            max-width: 800px;
            margin: 0 auto;
        }

        .calendar-placeholder {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(20px);
        }

        .calendar-placeholder h3 {
            color: #ffffff;
            margin-bottom: 2rem;
            font-size: 1.5rem;
        }

        .schedule-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            color: #e2e8f0;
            border-left: 4px solid #667eea;
        }

        .schedule-item strong {
            color: #ffffff;
        }

        
        .profile-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .profile-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            backdrop-filter: blur(20px);
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1rem;
        }

        .profile-card h3 {
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        .profile-card p {
            color: #94a3b8;
            margin-bottom: 2rem;
        }

        .profile-stats {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(20px);
        }

        .profile-stats h3 {
            color: #ffffff;
            margin-bottom: 1.5rem;
        }

        .profile-stats p {
            color: #e2e8f0;
            margin-bottom: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }



        
        @media (max-width: 768px) {
            .page-content {
                padding: 1rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .profile-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .resources-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

    
    <script src="../js/api.js"></script>
    <script src="../js/auth.js"></script>
    <script>
        
        
        
        class MobileNavigation {
            constructor() {
                this.overlay = document.getElementById('mobileNavOverlay');
                this.toggle = document.getElementById('navToggle');
                this.close = document.getElementById('mobileNavClose');
                this.isOpen = false;
                
                this.init();
            }
            
            init() {
                
                if (this.toggle) {
                    this.toggle.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        this.toggleMenu();
                    });
                }
                
                
                if (this.close) {
                    this.close.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.closeMenu();
                    });
                }
                
                
                if (this.overlay) {
                    this.overlay.addEventListener('click', (e) => {
                        if (e.target === this.overlay) {
                            this.closeMenu();
                        }
                    });
                }
                
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && this.isOpen) {
                        this.closeMenu();
                    }
                });
                
                
                const navLinks = this.overlay?.querySelectorAll('.mobile-nav-link');
                navLinks?.forEach(link => {
                    link.addEventListener('click', () => {
                        this.closeMenu();
                    });
                });
            }
            
            toggleMenu() {
                if (this.isOpen) {
                    this.closeMenu();
                } else {
                    this.openMenu();
                }
            }
            
            openMenu() {
                if (!this.overlay) return;
                
                this.isOpen = true;
                this.overlay.classList.add('active');
                
                
                document.body.style.overflow = 'hidden';
                document.body.style.position = 'fixed';
                document.body.style.width = '100%';
            }
            
            closeMenu() {
                if (!this.overlay) return;
                
                this.isOpen = false;
                this.overlay.classList.remove('active');
                
                
                document.body.style.overflow = '';
                document.body.style.position = '';
                document.body.style.width = '';
            }
        }
        
        
        let mobileNav;
        
        
        document.addEventListener('DOMContentLoaded', async () => {
            
            mobileNav = new MobileNavigation();
            const isAuthenticated = await api.checkAuthStatus();
            if (!isAuthenticated) {
                
                console.log('User not authenticated - login required for full features');
            } else {
                
                loadUserGroups();
            }
        });

        
        async function loadUserGroups() {
            try {
                const groups = await api.getUserGroups();
                
                console.log('User groups:', groups);
                
            } catch (error) {
                console.error('Failed to load groups:', error);
            }
        }

        
        function requireAuth(callback) {
            if (!api.user) {
                auth.showModal('login');
                return false;
            }
            callback();
            return true;
        }

        
        const originalCreateGroup = window.createGroup;
        const originalJoinGroup = window.joinGroup;

        window.createGroup = function() {
            requireAuth(() => {
                if (originalCreateGroup) originalCreateGroup();
            });
        };

        window.joinGroup = function(groupId) {
            requireAuth(() => {
                if (originalJoinGroup) originalJoinGroup(groupId);
            });
        };
    </script>
</body>
</html>


